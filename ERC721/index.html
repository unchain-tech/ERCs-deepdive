
<!DOCTYPE HTML>
<html lang="ja" >
    <head>
        <meta charset="UTF-8">
        <title>ERC721 ¬∑ Deepdive into ERCs</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 4.0.7">
        <meta name="author" content="https://github.com/neila">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../ERC777/" />
    
    
    <link rel="prev" href="../ERC20/" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Ê§úÁ¥¢„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Understanding ERCs</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../ERC20/">
            
                <a href="../ERC20/">
            
                    
                    ERC20
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.2" data-path="./">
            
                <a href="./">
            
                    
                    ERC721
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../ERC777/">
            
                <a href="../ERC777/">
            
                    
                    ERC777
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../ERC5192/">
            
                <a href="../ERC5192/">
            
                    
                    ERC5192
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../ERC5564/">
            
                <a href="../ERC5564/">
            
                    
                    ERC5564
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../metatx/">
            
                <a href="../metatx/">
            
                    
                    MetaTx
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Smart Contract Bugs</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../bugs/">
            
                <a href="../bugs/">
            
                    
                    Bugsüêù
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../bugs/ERC20.html">
            
                <a href="../bugs/ERC20.html">
            
                    
                    ERC20-related bugs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../bugs/ERC721.html">
            
                <a href="../bugs/ERC721.html">
            
                    
                    ERC721-related bugs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../bugs/Upgradeable.html">
            
                <a href="../bugs/Upgradeable.html">
            
                    
                    Upgradeable contracts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="../bugs/Reentrancy.html">
            
                <a href="../bugs/Reentrancy.html">
            
                    
                    Reentrancy attacks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.5" data-path="../bugs/UnderflowOverflow.html">
            
                <a href="../bugs/UnderflowOverflow.html">
            
                    
                    Underflows & Overflows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.6" data-path="../bugs/LowLevelCall.html">
            
                <a href="../bugs/LowLevelCall.html">
            
                    
                    Low-level calls
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.7" data-path="../bugs/DoS.html">
            
                <a href="../bugs/DoS.html">
            
                    
                    DoS attack vectors
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.8" data-path="../bugs/MEV.html">
            
                <a href="../bugs/MEV.html">
            
                    
                    Exploiting MEVs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.9" data-path="../bugs/Oracle.html">
            
                <a href="../bugs/Oracle.html">
            
                    
                    Exploiting Oracles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.10" data-path="../bugs/Rug-Pull.html">
            
                <a href="../bugs/Rug-Pull.html">
            
                    
                    Rug pulls
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            HonKit„ÅßÂÖ¨Èñã 
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >ERC721</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="erc721">ERC721</h1>
<h2 id="ÁõÆÊ¨°">ÁõÆÊ¨°</h2>
<h3 id="1-„ÅØ„Åò„ÇÅ„Å´">1. <a href="#1-„ÅØ„Åò„ÇÅ„Å´">„ÅØ„Åò„ÇÅ„Å´</a></h3>
<h3 id="2-erc721sol-„Å´„Ç§„É≥„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Çã„Éï„Ç°„Ç§„É´">2. <a href="#2-erc721sol-„Å´„Ç§„É≥„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Çã„Éï„Ç°„Ç§„É´">ERC721.sol „Å´„Ç§„É≥„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Çã„Éï„Ç°„Ç§„É´</a></h3>
<ol>
<li><a href="#21-addresssol">Address,sol</a></li>
<li><a href="#22-contextsol">Context.sol</a></li>
<li><a href="#23-stringssol">Strings.sol</a></li>
<li><a href="#24-erc165sol">ERC165.sol</a></li>
<li><a href="#25-ierc721sol">IERC721.sol</a></li>
<li><a href="#26-ierc721receiversol">IERC721Receiver.sol</a></li>
<li><a href="#27-ierc721metadatasol">IERC721Metadata.sol</a></li>
</ol>
<h3 id="3-erc721sol">3. <a href>ERC721.sol</a></h3>
<ol>
<li><a href="#31-importusingÂ§âÊï∞ÂÆöÁæ©„Åù„Åó„Å¶-constructor">&quot;&quot;import&quot;&quot;Ôºå&quot;&quot;using&quot;&quot;ÔºåÂ§âÊï∞ÂÆöÁæ©Ôºå„Åù„Åó„Å¶ &quot;&quot;constructor&quot;&quot;</a></li>
<li><a href="#32-„Çπ„Éà„É¨„Éº„Ç∏‰∏ä„ÅÆÂÄ§„ÇíÊõ∏„ÅçÊèõ„Åà„Çã„Åì„Å®„Åå„Å™„ÅÑ-view-Èñ¢Êï∞Áæ§">„Çπ„Éà„É¨„Éº„Ç∏‰∏ä„ÅÆÂÄ§„ÇíÊõ∏„ÅçÊèõ„Åà„Çã„Åì„Å®„Åå„Å™„ÅÑ &quot;&quot;view&quot;&quot; Èñ¢Êï∞Áæ§</a></li>
<li><a href="#33-‰∏ªË¶Å„Å™Ê©üËÉΩ„ÅÆÁô∫Âãï„ÇíÊãÖ„ÅÜÊ®ôÊ∫ñÊê≠ËºâÈñ¢Êï∞Áæ§">‰∏ªË¶Å„Å™Ê©üËÉΩ„ÅÆÁô∫Âãï„ÇíÊãÖ„ÅÜÊ®ôÊ∫ñÊê≠ËºâÈñ¢Êï∞Áæ§</a></li>
<li><a href="#34-ÊåôÂãï„ÇíÂè∏„ÇãÈñ¢Êï∞Áæ§ËøΩÂä†ÂÆüË£Ö„ÅÆ„Åü„ÇÅ„ÅÆÈñ¢Êï∞Áæ§">ÊåôÂãï„ÇíÂè∏„ÇãÈñ¢Êï∞Áæ§ÔºåËøΩÂä†ÂÆüË£Ö„ÅÆ„Åü„ÇÅ„ÅÆÈñ¢Êï∞Áæ§</a></li>
</ol>
<h3 id="4-tips">4. <a href="#4-tips">TIPs</a></h3>
<h2 id="1-„ÅØ„Åò„ÇÅ„Å´">1. „ÅØ„Åò„ÇÅ„Å´</h2>
<p>„Åì„Åì„Åß„ÅØÔºåERC721.sol „Å®„Åù„ÅÆ‰∏≠„Åß„Ç§„É≥„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Çã 7 „Å§„ÇíÂê´„ÇÅ„Åü 8 „Å§„ÅÆ sol „Éï„Ç°„Ç§„É´„Å´„Å§„ÅÑ„Å¶ÔºåÈ†ÜÁï™„Å´„Ç≥„Éº„Éâ„Éô„Éº„Çπ„Åß„Çà„Åø„Å®„Åè„Åì„Å®„Å´„Çà„Å£„Å¶ ERC721 „ÇíÂÆåÂÖ®„Å´ÁêÜËß£„Åô„Çã„Åì„Å®„ÇíÁõÆÊåá„Åó„Åæ„ÅôÔºé</p>
<p>„Åó„Åã„ÅóÔºå„Åì„ÅÆ README.md „Éï„Ç°„Ç§„É´„Åß„ÅØ„Ç≥„Éº„Éâ„ÅØÊ•µÂäõ‰Ωø„Çè„ÅöÔºåÂÆüÈöõ„Å´„Ç≥„Éº„Éâ„ÇíË™≠„ÅøËß£„Åè sol „Éï„Ç°„Ç§„É´Áæ§„Å∏„ÅÆ„É™„É≥„ÇØ„ÅØÊ∑ª„Åà„Åü„ÅÜ„Åà„ÅßÔºåÊó•Êú¨Ë™û„Éô„Éº„Çπ„Éª„Éé„Éº„Ç≥„Éº„Éâ„Åß„Å™„Çã„Åπ„ÅèÁ∞°ÊΩî„Å™Ëß£Ë™¨„ÇíË°å„Å£„Å¶„ÅÑ„Åç„Åæ„ÅôÔºé</p>
<blockquote>
<p>Â∞öÔºåSolidity „ÅÆÊñáÊ≥ï„Å´Èñ¢„Åó„Å¶„ÅØ„ÅÇ„ÇãÁ®ãÂ∫¶ÂâçÊèê„Å®„Åó„Å¶„ÅÑ„Åæ„Åô„ÅåÔºåSolidity „ÅÆ„Éè„É≥„Ç∫„Ç™„É≥„É©„Éº„Éã„É≥„Ç∞„ÅÆÊâãÊÆµ„Å®„ÇÇ„Å™„Çä„Åà„Çã„Çà„ÅÜ„Å´ÔºåÊ§úÁ¥¢ÂèØËÉΩ„Å™Áî®Ë™û„ÇíÁî®„ÅÑ„Çã„Åì„Å®„ÇíÂøÉÊéõ„Åë„Çã„Åì„Å®„Å®„Åó„Åæ„ÅôÔºé</p>
</blockquote>
<h2 id="2-erc721sol-„Å´„Ç§„É≥„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Çã„Éï„Ç°„Ç§„É´">2. ERC721.sol „Å´„Ç§„É≥„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Çã„Éï„Ç°„Ç§„É´</h2>
<p>‰ª•‰∏ã„Åß„ÅØÔºå<code>ERC721.sol</code> „Åß„Ç§„É≥„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„Çã„Åù„Çå„Åû„Çå„ÅÆ„Éï„Ç°„Ç§„É´„Å´„Å§„ÅÑ„Å¶Ôºå„Åä„Åä„Åæ„Åã„Å™ÂÜÖÂÆπ„Å® <code>ERC721.sol</code> ÂÜÖ„Åß„ÅÆÁî®ÈÄî„ÇíË™¨Êòé„Åó„Å¶„ÅÑ„Åç„Åæ„ÅôÔºé
„É¨„Éù„Ç∏„Éà„É™ÂÜÖ„ÅÆÂêåÂêç„Éï„Ç°„Ç§„É´„Å´„ÅØÔºåÂéüÊú¨„Å´ÈÅ©ÂÆú„Ç≥„É°„É≥„Éà„ÇíËøΩÂä†„Åó„Åü„Éï„Ç°„Ç§„É´„ÇíÂêåÊ¢±„Åó„Å¶„ÅÇ„Çä„Åæ„ÅôÔºé„ÅîÊ¥ªÁî®„Åè„Å†„Åï„ÅÑÔºé</p>
<h3 id="21-addresssol">2.1. Address,sol</h3>
<p>„Åì„ÅÆ„Éï„Ç°„Ç§„É´„Åß„ÅØÔºå <code>address</code> Âûã„ÅÆÂ§âÊï∞„Å´Èñ¢„Åô„ÇãÈñ¢Êï∞„ÇíÈõÜ„ÇÅ„Åü <code>Address</code> „É©„Ç§„Éñ„É©„É™„ÇíÂÆöÁæ©„Åó„Å¶„ÅÑ„Åæ„ÅôÔºé
ERC721 „Å´„Åä„Åë„ÇãÁî®ÈÄî„ÅØÔºå<code>isContract()</code> „ÅÆÂà©Áî®„Åß„ÅôÔºé„Åì„ÅÆÈñ¢Êï∞„ÅØ <code>address</code> ÂÄ§„ÇíÂºïÊï∞„Å´„Å®„ÇäÔºå„Åù„ÅÆ„Ç¢„Éâ„É¨„ÇπÈï∑„Åå 0 „Çà„ÇäÂ§ß„Åç„ÅÑ„Åã„Å©„ÅÜ„Åã„Çí <code>bool</code> ÂÄ§„ÅßËøî„Åó„Åæ„ÅôÔºé„Åì„ÅÜ„Åô„Çã„Åì„Å®„ÅßÔºå4 Á®Æ„Åª„Å©„ÅÆ‰æãÂ§ñ„ÇíÈô§„ÅçÔºåÂºïÊï∞„ÅÆ„Ç¢„Éâ„É¨„Çπ„Åå„Ç≥„É≥„Éà„É©„ÇØ„Éà„Ç¢„Éâ„É¨„Çπ„Åã„Å©„ÅÜ„Åã„ÇíÂà§Êñ≠„Åó„Åæ„ÅôÔºé</p>
<blockquote>
<p>„Åì„ÅÆ‰æãÂ§ñ„Å®„ÅÑ„ÅÜ„ÅÆ„ÅØ„Ç≥„É≥„Éà„É©„ÇØ„Éà„ÅåÊ©üËÉΩ„Åó„Å™„ÅÑÁâπÊÆä„Å™Áä∂Ê≥Å„Å´„ÅÇ„ÇãÂ†¥Âêà„Åß„ÅôÔºé„Å™„ÅÆ„ÅßÔºåÂÆüË≥™ÁöÑ„Å´„ÅØ„Ç≥„É≥„Éà„É©„ÇØ„Éà„ÅåÂà©Áî®ÂèØËÉΩ„Å™Áä∂ÊÖã„Åß„ÅÇ„Çã„Åã„Å©„ÅÜ„Åã„ÇíÁ§∫„Åô„ÇÇ„ÅÆ„Å´„Å™„Çä„Åæ„ÅôÔºé„Åù„Åó„Å¶Ôºå„Ç≥„É≥„Éà„É©„ÇØ„Éà„Å®„Ç¶„Ç©„É¨„ÉÉ„Éà„Ç¢„Éâ„É¨„Çπ(EOA „Ç¢„Éâ„É¨„Çπ)„ÅØÂΩ¢Âºè„ÅåÂêå„Åò„Åß„ÅÇ„Çã„Åü„ÇÅÔºå‰ªÆ„Å´Â≠òÂú®„Åô„Çã„Ç¶„Ç©„É¨„ÉÉ„Éà„Ç¢„Éâ„É¨„Çπ„ÇíÂºïÊï∞„Å®„Åó„Åü„Å®„Åó„Å¶„ÇÇ <code>isContract()</code> „ÅØ <code>true</code> „ÇíËøî„Åô„Å®ÊÄù„Çè„Çå„Åæ„ÅôÔºé</p>
</blockquote>
<p>‚Üì ÂÖÉ„Éï„Ç°„Ç§„É´</p>
<p><a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/Address.sol" target="_blank">openzeppelin-contracts/contracts/utils/Address.sol</a></p>
<h3 id="22-contextsol">2.2. Context.sol</h3>
<p>„Åì„ÅÆ„Éï„Ç°„Ç§„É´„Åß„ÅØÔºå<code>abstract</code> „Å®„ÅÑ„ÅÜÂàÜÈ°û„ÅÆ <code>contract</code> „ÅÆ‰∏≠„ÅßÔºå<code>msg.sender</code> „Å®„ÅÑ„ÅÜÂÆ£Ë®Ä„Çí„É©„ÉÉ„Éó„Åô„Çã <code>_msgSender</code>„Å®„ÅÑ„ÅÜÈñ¢Êï∞„ÇíÂÆ£Ë®Ä„Åó„Å¶„ÅÑ„Åæ„ÅôÔºé</p>
<p>„Çè„Åñ„Çè„ÅñÈñ¢Êï∞„Åß„É©„ÉÉ„Éó„Åó„Å¶„ÅÑ„Çã„ÅÆ„ÅØ„Å™„Åú„Åã„Å®„ÅÑ„ÅÜ„Å®Ôºå„É°„Çø„Éà„É©„É≥„Ç∂„ÇØ„Ç∑„Éß„É≥„Çπ„Ç≠„Éº„É†„ÇíÁî®„ÅÑ„ÇãÂ†¥Âêà„Å´ <code>msg.sender</code> „Çí„Åù„ÅÆ„Åæ„Åæ‰Ωø„ÅÜ„ÅÆ„ÅØÈÉΩÂêà„ÅåÊÇ™„ÅÑ„Åã„Çâ„Åß„ÅôÔºé</p>
<p>‰ª•‰∏ã„Å´Á∞°Âçò„Å™Ë™¨Êòé„Çí„ÅÆ„Åõ„Å¶„Åä„Åç„Åæ„ÅôÔºéË©≥„Åó„Åè„ÅØ<a href="https://github.com/unchain-dev/openzeppelin-deepdive/tree/main/metatx-related-contracts#2-meta-transaction%E3%81%A8%E3%81%AF-1" target="_blank">„Åì„Åì</a>„ÇíÂèÇÁÖß„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºé</p>
<blockquote>
<p><code>msg.sender</code> „ÅØ EVM „Å´Ë¶èÂÆö„Åï„Çå„Åü„Ç∞„É≠„Éº„Éê„É´Â§âÊï∞„Å™„ÅÆ„ÅßÊõ∏„ÅçÊèõ„Åà„Åß„Åç„Åæ„Åõ„Çì„ÅåÔºåÈñ¢Êï∞„ÅÆ‰∏≠„Å´ <code>msg.sender</code> „Çí„É©„ÉÉ„Éó„Åó„Åü <code>_msgSender()</code> Èñ¢Êï∞„Çí‰Ωø„ÅÜ„Åì„Å®„Å´„Çà„Å£„Å¶Ôºå„É°„Çø„Éà„É©„É≥„Ç∂„ÇØ„Ç∑„Éß„É≥‰ΩøÁî®ÊôÇ„Å´„ÅØ <code>_msg.sender()</code> Èñ¢Êï∞„Çí„Ç™„Éº„Éê„Éº„É©„Ç§„Éâ„Åó„Å¶Ëøî„ÇäÂÄ§„ÇíÊõ∏„ÅçÊèõ„Åà„Çã„Åì„Å®„Å´„Çà„Çä <code>msg.sender(gas fee„ÇíÊîØÊâï„ÅÜ„Ç¢„Éâ„É¨„Çπ)</code> „Å® <code>_msgSender()„ÅÆËøî„ÇäÂÄ§(tx„ÇíÂÆüË°å„Åó„Åü„ÅÑ„Ç¢„Éâ„É¨„Çπ)</code> „ÇíÂàÜ„Åë„Çã„Åì„Å®„Åå„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„ÅôÔºé</p>
</blockquote>
<p>‚Üì ÂÖÉ„Éï„Ç°„Ç§„É´</p>
<p><a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/Context.sol" target="_blank">openzeppelin-contracts/contracts/utils/Context.sol</a></p>
<h3 id="23-stringssol">2.3. Strings.sol</h3>
<p>„Åì„Çå„ÅØÔºåuint Âàó„ÇíÊñáÂ≠óÂàóÔºåÁâπ„Å´ 16 ÈÄ≤Êï∞ÊñáÂ≠óÂàó„Å´Â§âÊèõ„Åô„ÇãÈñ¢Êï∞„ÅÆ„Çπ„Çø„É≥„ÉÄ„Éº„Éâ„ÇíÈõÜ„ÇÅ„Åü„É©„Ç§„Éñ„É©„É™„Åß„ÅôÔºé
‰Ωø„ÅÑÈÅì„Å´„Å§„ÅÑ„Å¶„ÅØÔºå‰∏ã„ÅÆ„Çà„ÅÜ„Å™ÂÆü‰æã„Çí„Åø„Çã„Å®„Çè„Åã„Çä„ÇÑ„Åô„ÅÑ„Åß„Åó„Çá„ÅÜÔºé
ÂÖÉ„Éï„Ç°„Ç§„É´„Åß„ÅØ„ÅÇ„Åæ„ÇäËß¶„Çå„Çâ„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„ÅåÔºå„Ç®„É≥„Ç≥„Éº„Éâ(Â§âÊèõ‰ΩúÊ•≠)„ÅÆ„Åó„Åè„Åø„Å´„Å§„ÅÑ„Å¶„ÇÇÂ∞ë„Åó„Åµ„Çå„Å¶„ÅÇ„Çã„ÅÆ„ÅßÔºå„Åù„ÅÆ„ÅÇ„Åü„Çä„ÇÇÊ∞ó„Å´„Å™„ÇãÊñπ„ÅØ„É¨„Éù„Ç∏„Éà„É™ÂÜÖ„ÅÆ„Ç≥„É°„É≥„ÉàÂÖ•„Çä„Éï„Ç°„Ç§„É´„ÇíË¶ã„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑÔºé</p>
<blockquote>
<p>„Åì„ÅÆ ERC271 „Å´„Åä„ÅÑ„Å¶„ÅØÔºåtokenURI „ÇíÂèÇÁÖß„Åô„Çã <code>tokenURI(uint256 tokenId)</code> Èñ¢Êï∞„Å´„Åä„ÅÑ„Å¶Ôºå uint „Åß„ÅÇ„Çã <code>tokenId</code> „Çí string „Å´Â§âÊèõ„Åô„Çã„Å®„Åç„Å´Áî®„ÅÑ„Å¶„ÅÑ„ÇãÔºé
„Åì„Çå„ÅØÈñ¢Êï∞ÂÜÖ„Åß string „Åß„ÅÇ„Çã <code>_baseURI()</code> „Å® uint „Åß„ÅÇ„Çã <code>tokenId</code> „ÇíÁµêÂêà„Åô„Çã„Åü„ÇÅ„Åß„ÅÇ„ÇãÔºé
uint „Åß„ÅÇ„Çã <code>tokenId</code> „Çí string „Å´Â§âÊèõ„Åó„Å¶ <code>_baseURI()</code> „Å®ÁµêÂêà„Åô„Çã„Åì„Å®„Åß <code>tokenURI</code> „ÇíÁîüÊàê„ÅóÔºåstring ÂÄ§„Å®„Åó„Å¶Ëøî„Åô„ÅÆ„Åß„ÅÇ„ÇãÔºé</p>
</blockquote>
<p>‚Üì ÂÖÉ„Éï„Ç°„Ç§„É´</p>
<p><a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/Strings.sol" target="_blank">openzeppelin-contracts/contracts/utils/Strings.sol</a></p>
<h3 id="24-erc165sol">2.4. ERC165.sol</h3>
<p>„Åì„ÅÆ„Éï„Ç°„Ç§„É´„Å´„ÅØÔºå„Ç§„É≥„Çø„Éº„Éï„Çß„Ç§„ÇπÊ§úÁü•„ÅÆÊ®ôÊ∫ñË¶èÊ†º„Åß„ÅÇ„Çã <code>ERC165</code> „Å´„ÇÇ„Å®„Å•„Åè„É°„ÇΩ„ÉÉ„Éâ„ÅåÂÆöÁæ©„Åï„Çå„Å¶„ÅÑ„Åæ„ÅôÔºé
Ê§úÁü•„ÇíÂÆüË£Ö„Åó„Åü„ÅÑ„Ç≥„É≥„Éà„É©„ÇØ„ÉàÔºåÊ§úÁü•„Åó„Åü„ÅÑ„Ç≥„É≥„Éà„É©„ÇØ„Éà„Å´ÂØæ„Åó„Å¶Á∂ôÊâø„ÅóÔºå
ÂâçËÄÖ„ÅÆÊ§úÁü•„ÇíÂÆüË£Ö„Åó„Åü„ÅÑ„Ç≥„É≥„Éà„É©„ÇØ„ÉàÂÜÖ„Åß <code>supportsInterface(bytes4 interfaceId)</code> Èñ¢Êï∞„ÇíÈÅ©Âàá„Å´ <code>override</code> „Åô„Çã„Åì„Å®„ÅßÊ§úÁü•„ÇíË°å„Åà„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„ÅôÔºé
‰ªïÁµÑ„Åø„Å´„Å§„ÅÑ„Å¶„ÅØ ERC165ÔºåÂÆüË£ÖÊñπÊ≥ï„ÇÑÊ§úÁü•„ÅÆ‰ªïÊñπ„Å´„Å§„ÅÑ„Å¶„ÅØ ERC721 „Å´ËøΩË®ò„Åô„Çã„Åì„Å®„Å®„Åó„Åæ„ÅôÔºé</p>
<h3 id="25-ierc721sol">2.5. IERC721.sol</h3>
<p>„Åì„ÅÆ„Éï„Ç°„Ç§„É´„Åß„ÅØÔºå<code>interface</code> „Å®„ÅÑ„ÅÜÂàÜÈ°û„ÅÆ <code>contract</code> „ÅÆ‰∏≠„ÅßÔºå<code>ERC721.sol</code> ÂÜÖ„Å´Â≠òÂú®„Åô„ÇãÈñ¢Êï∞„ÅÆ‰∏≠„ÅßÂèØË¶ñÊÄß„Åå <code>internal</code> „Åß„Å™„ÅÑ„ÇÇ„ÅÆ„ÅÆÂûãÂÆöÁæ©„Å®Ôºå„Ç≥„É°„É≥„Éà„ÇíÁî®„ÅÑ„ÅüÈñ¢Êï∞„ÅÆË™¨Êòé„Åå„Å™„Åï„Çå„Å¶„ÅÑ„Åæ„ÅôÔºé</p>
<p><code>abstract</code> „Å® <code>interface</code> „ÅÆÈÅï„ÅÑ„ÅØÔºå<code>contract</code> ÂÜÖ„Å´Èñ¢Êï∞„ÇíÂÜÖÂåÖ„Åô„Çã„ÅãÂê¶„Åã„Åß„ÅôÔºé</p>
<p>‚Üì ÂÖÉ„Éï„Ç°„Ç§„É´</p>
<p><a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC721/IERC721.sol" target="_blank">openzeppelin-contracts/contracts/token/ERC721/IERC721.sol</a></p>
<h3 id="26-ierc721receiversol">2.6. IERC721Receiver.sol</h3>
<p>„Åì„ÅÆ„Éï„Ç°„Ç§„É´„Åß„ÅØÔºåERC721 „Éà„Éº„ÇØ„É≥„Çí transfer „Åô„Çã„Å®„Åç„Å´Ôºå<code>to</code> „Ç¢„Éâ„É¨„Çπ„Åå ERC721 „Éà„Éº„ÇØ„É≥„ÇíÂèó„ÅëÂèñ„Çã„Åì„Å®„Åå„Åß„Åç„Çã„Åã„ÇíÂà§Êñ≠„Åß„Åç„Çã„ÇÇ„ÅÆ„Å®„Å™„Å£„Å¶„ÅÑ„Åæ„ÅôÔºé
„Å®„ÅÑ„ÅÜ„ÅÆ„ÇÇÔºå„Ç≥„É≥„Éà„É©„ÇØ„Éà„Ç¢„Éâ„É¨„Çπ„Å´ÈÄÅ‰ø°„Åó„Åü NFT „Å®„ÅÑ„ÅÜ„ÅÆ„ÅØÂü∫Êú¨ÁöÑ„Å´„ÅØ GOX „Åó„Åæ„ÅôÔºé
‰æãÂ§ñ„Å®„Åó„Å¶Ôºå„Ç≥„É≥„Éà„É©„ÇØ„Éà„Ç¢„Éâ„É¨„ÇπÂÅ¥„Å´ NFT „ÇíÊâ±„ÅÜ„Åü„ÇÅ„ÅÆ„Ç≥„É≥„Éà„É©„ÇØ„Éà„ÅåÂ≠òÂú®„Åô„ÇãÂ†¥Âêà„Å´Âºï„ÅçÂá∫„Åô„Åì„Å®„ÅåÂá∫Êù•„Çã„ÅÆ„Åß„ÅôÔºé
„Åù„ÅÆ„Åü„ÇÅÔºå‰∏çÈÅã„Å™ GOX „ÇíÈÅø„Åë„Çã„Åü„ÇÅ„Å´ÔºåNFT „ÅÆÈÄÅ‰ø°„ÇíË°å„ÅÜÈöõ„Å´„ÅØÈÄÅ‰ø°ÂÖà„ÅÆ <code>to</code> „Ç¢„Éâ„É¨„Çπ„Åå„Ç≥„É≥„Éà„É©„ÇØ„Éà„Ç¢„Éâ„É¨„Çπ„Å†„Å£„ÅüÂ†¥Âêà„Å´„Åì„ÅÆ„Ç§„É≥„Çø„Éº„Éï„Çß„Ç§„Çπ„ÅåÂ∞éÂÖ•„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„ÇÇ„ÅÆ„Å´„ÅØÈÄÅ„Çå„Å™„ÅÑ„Çà„ÅÜ„Å´„Åô„Çã <code>_safeTransfer</code> „Å®„ÅÑ„ÅÜÈÄÅ‰ø°Ë¶èÊ†º„ÅåÊèêÊ°à„Åï„Çå„Åæ„Åó„ÅüÔºé
„Çà„Å£„Å¶ÔºåNFT „ÅÆÈÄÅ‰ø°„ÇíÂèó„Åë„Çã„Åü„ÇÅ„ÅÆ„Ç≥„É≥„Éà„É©„ÇØ„Éà„Çí‰Ωú„Çä„Åü„ÅÑÂ†¥Âêà„ÅØ„Åì„ÅÆ„Ç§„É≥„Çø„Éº„Éï„Çß„Ç§„Çπ„ÇíÁ∂ôÊâø„Åó„Å¶„Åä„Åè„Åì„Å®„ÅåÊé®Â•®„Åï„Çå„Åæ„ÅôÔºé
‰ªïÁµÑ„Åø„Å´„Å§„ÅÑ„Å¶„ÅØÔºå<code>_checkOnERC721Received()</code> Èñ¢Êï∞„ÅÆË™¨Êòé„ÅßÂ∞ë„Åó„Åµ„Çå„Åæ„ÅôÔºé</p>
<p>‚Üì ÂÖÉ„Éï„Ç°„Ç§„É´</p>
<p><a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC721/IERC721Receiver.sol" target="_blank">openzeppelin-contracts/contracts/token/ERC721/IERC721Receiver.sol</a></p>
<h3 id="27-ierc721metadatasol">2.7. IERC721Metadata.sol</h3>
<p>„Åì„ÅÆ„Éï„Ç°„Ç§„É´„Åß„ÅØÔºå<code>interface</code> „Å®„ÅÑ„ÅÜÂàÜÈ°û„ÅÆ <code>contract</code> „ÅÆ‰∏≠„ÅßÔºå</p>
<p><code>ERC721.sol</code> ÂÜÖ„Åß <code>_name</code> Â§âÊï∞„ÇíÂèÇÁÖß„Åô„Çã <code>name</code> Èñ¢Êï∞Ôºå
<code>ERC721.sol</code> ÂÜÖ„Åß <code>_symbol</code> Â§âÊï∞„ÇíÂèÇÁÖß„Åô„Çã <code>symbol</code> Èñ¢Êï∞Ôºå
<code>ERC721.sol</code> ÂÜÖ„Åß <code>_baseURI()</code> „ÅÆËøî„ÇäÂÄ§„Å® <code>tokenId</code> „ÇíÂèÇÁÖß„Åô„Çã <code>tokenURI</code> Èñ¢Êï∞</p>
<p>„ÅÆ‰∏â„Å§„ÅÆÈñ¢Êï∞„ÇíÂûãÂÆöÁæ©„Åó„Å¶„ÅÑ„Åæ„ÅôÔºé</p>
<p>‚Üì ÂÖÉ„Éï„Ç°„Ç§„É´</p>
<p><a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC721/extensions/IERC721Metadata.sol" target="_blank">openzeppelin-contracts/contracts/token/ERC721/extensions/IERC721Metadata.sol</a></p>
<h2 id="3-erc721">3. ERC721</h2>
<h3 id="31-importÔºåusingÔºåÂ§âÊï∞ÂÆöÁæ©Ôºå„Åù„Åó„Å¶-constructor">3.1. &quot;&quot;import&quot;&quot;Ôºå&quot;&quot;using&quot;&quot;ÔºåÂ§âÊï∞ÂÆöÁæ©Ôºå„Åù„Åó„Å¶ &quot;&quot;constructor&quot;&quot;</h3>
<p>„Åï„ÅÅÔºå„Åù„Çå„Åß„ÅØÊú¨‰Ωì„Åß„ÅÇ„Çã <code>ERC721.sol</code> „Å´„Å§„ÅÑ„Å¶„Åø„Å¶„ÅÑ„Åç„Åæ„Åó„Çá„ÅÜÔºé</p>
<p>„Åæ„ÅöÊúÄÂàù„Å´ÔºåÂÖàÁ®ãÁ¥π‰ªã„Åó„Åü 7 „Å§„ÅÆ <code>.sol</code> „Éï„Ç°„Ç§„É´„Çí import „Åó„ÅüÂæåÔºå„Åù„ÅÆ„ÅÜ„Å° <code>interface</code>Ôºå <code>abstract contract</code> „Çí <code>ERC721</code> „Å®„ÅÑ„ÅÜ <code>contract</code> „Å´Á∂ôÊâø„Åï„Åõ„Å¶„ÅÑ„Åæ„ÅôÔºé</p>
<p>Ê¨°„Å´Ôºå<code>ERC721</code> „ÅÆÂÜÖÈÉ®„Çí„Åø„Å¶„ÅÑ„Åç„Åæ„Åó„Çá„ÅÜÔºé</p>
<p>ÊúÄÂàù„Å´ <code>using</code> „Ç≥„Éû„É≥„Éâ„Åß„É©„Ç§„Éñ„É©„É™„ÅÆ‰ΩøÁî®„ÇíÂÆ£Ë®Ä„Åó„Å¶„ÅÑ„Åæ„ÅôÔºé
Ê¨°„Å´ÔºåÂ§âÊï∞Ôºå„Éû„ÉÉ„Éî„É≥„Ç∞„ÇíÂÆ£Ë®Ä„Åó„Å¶„ÅÑ„Åæ„ÅôÔºé
„Åù„Åó„Å¶Ôºå<code>constructor</code> „ÅßÂ§âÊï∞Áæ§„ÇíÂàùÊúüÂåñ„Åó„Å¶„ÅÑ„Åæ„ÅôÔºé</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span>
<span class="hljs-comment">// OpenZeppelin Contracts (last updated v4.7.0) (token/ERC721/ERC721.sol)</span>

pragma solidity ^<span class="hljs-number">0.8</span><span class="hljs-number">.0</span>;

<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./IERC721.sol&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./IERC721Receiver.sol&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;./extensions/IERC721Metadata.sol&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;../../utils/Address.sol&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;../../utils/Context.sol&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;../../utils/Strings.sol&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;../../utils/introspection/ERC165.sol&quot;</span>;

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@dev </span>Implementation of https://eips.ethereum.org/EIPS/eip-721[ERC721] Non-Fungible Token Standard, including
 * the Metadata extension, but not including the Enumerable extension, which is available separately as
 * {ERC721Enumerable}.
 */</span>
contract ERC721 is Context, ERC165, IERC721, IERC721Metadata {
    <span class="hljs-comment">// „É©„Ç§„Éñ„É©„É™„ÅÆ‰ΩøÁî®„ÇíÂÆ£Ë®Ä</span>
    using Address <span class="hljs-keyword">for</span> address;
    using Strings <span class="hljs-keyword">for</span> uint256;

    <span class="hljs-comment">// Token name</span>
    string private _name;

    <span class="hljs-comment">// Token symbol</span>
    string private _symbol;

    <span class="hljs-comment">// „Éà„Éº„ÇØ„É≥ID‚ÜíÊâÄÊúâËÄÖ„Ç¢„Éâ„É¨„Çπ „ÅÆ„Éû„ÉÉ„Éî„É≥„Ç∞</span>
    <span class="hljs-comment">// Mapping from token ID to owner address</span>
    mapping(<span class="hljs-function"><span class="hljs-params">uint256</span> =&gt;</span> address) private _owners;

    <span class="hljs-comment">// ÊâÄÊúâËÄÖ„Ç¢„Éâ„É¨„Çπ‚Üí‰øùÊúâÊûöÊï∞ „ÅÆ„Éû„ÉÉ„Éî„É≥„Ç∞</span>
    <span class="hljs-comment">// Mapping owner address to token count</span>
    mapping(<span class="hljs-function"><span class="hljs-params">address</span> =&gt;</span> uint256) private _balances;

    <span class="hljs-comment">// „Éà„Éº„ÇØ„É≥ID‚ÜíÁßªËª¢Ë®±ÂèØÊâÄÊúâ„Ç¢„Éâ„É¨„Çπ „ÅÆ„Éû„ÉÉ„Éî„É≥„Ç∞</span>
    <span class="hljs-comment">// Mapping from token ID to approved address</span>
    mapping(<span class="hljs-function"><span class="hljs-params">uint256</span> =&gt;</span> address) private _tokenApprovals;

    <span class="hljs-comment">// ÊâÄÊúâËÄÖ„Ç¢„Éâ„É¨„Çπ„Åã„ÇâÁßªËª¢Ë®±ÂèØÊâÄÊúâ„Ç¢„Éâ„É¨„ÇπÔºå„Åù„Åó„Å¶Ë®±ÂèØ„ÅÆÊúâÁÑ°„Å∏„ÅÆ„ÉÄ„Éñ„É´„Éû„ÉÉ„Éî„É≥„Ç∞</span>
    <span class="hljs-comment">// ÁßªËª¢Ë®±ÂèØÊâÄÊúâ„Ç¢„Éâ„É¨„Çπ„ÇíÁôªÈå≤„Åô„ÇãÊôÇ„Å´„Éû„ÉÉ„Éî„É≥„Ç∞„Åó„Å¶„Åä„ÅÑ„Å¶Ôºå</span>
    <span class="hljs-comment">// Ë®±ÂèØÁßªËª¢„Åô„ÇãÊôÇ„Å´Ë®±ÂèØ„ÅÆÊúâÁÑ°„ÇíÁ¢∫Ë™ç„Åô„ÇãÊôÇ„Å´‰Ωø„ÅÜ</span>
    <span class="hljs-comment">// Mapping from owner to operator approvals</span>
    mapping(<span class="hljs-function"><span class="hljs-params">address</span> =&gt;</span> mapping(<span class="hljs-function"><span class="hljs-params">address</span> =&gt;</span> bool)) private _operatorApprovals;

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>Initializes the contract by setting a `name` and a `symbol` to the token collection.
     */</span>
    <span class="hljs-function"><span class="hljs-title">constructor</span>(<span class="hljs-params">string memory name_, string memory symbol_</span>)</span> {
        <span class="hljs-comment">// „Éà„Éº„ÇØ„É≥ÂêçÔºå„Éà„Éº„ÇØ„É≥„Ç∑„É≥„Éú„É´„ÇíÂàùÊúüÂåñ</span>
        _name = name_;
        _symbol = symbol_;
    }
</code></pre>
<h3 id="32-„Çπ„Éà„É¨„Éº„Ç∏‰∏ä„ÅÆÂÄ§„ÇíÊõ∏„ÅçÊèõ„Åà„Çã„Åì„Å®„Åå„Å™„ÅÑ-view-Èñ¢Êï∞Áæ§">3.2. „Çπ„Éà„É¨„Éº„Ç∏‰∏ä„ÅÆÂÄ§„ÇíÊõ∏„ÅçÊèõ„Åà„Çã„Åì„Å®„Åå„Å™„ÅÑ &quot;&quot;view&quot;&quot; Èñ¢Êï∞Áæ§</h3>
<p>„Åï„Å¶Ôºå„Åì„Åì„Åã„ÇâÈñ¢Êï∞„ÅÆË®òËø∞„ÅåÂßã„Åæ„Çä„Åæ„ÅôÔºé</p>
<p>„Åæ„ÅöË®òËø∞„Åï„Çå„Çã„ÅÆ„ÅåÔºå„Çπ„Éà„É¨„Éº„Ç∏„ÅÆÂÄ§„ÇíÊõ∏„ÅçÊèõ„Åà„Çã„Åì„Å®„ÅÆ„Å™„ÅÑ <code>view</code> Èñ¢Êï∞Áæ§„Åß„ÅôÔºé
„Åì„Çå„Çâ„ÅØÔºå„Åä„Åä„Åæ„Åã„Å´„ÅÑ„Åà„Å∞ 4 „Å§„Å´Âå∫ÂàÜ„Åß„Åç„Åæ„ÅôÔºé</p>
<ul>
<li>ERC165 „ÅÆÊ©üËÉΩ„ÇíÂè∏„Çã <code>supportsInterface()</code> Èñ¢Êï∞</li>
<li>‰∏ä„ÅßÂÆöÁæ©„Åó„Å¶„ÅÇ„Å£„Åü<code>mapping</code> „Å´Ê†ºÁ¥ç„Åï„Çå„ÅüÂÄ§„ÇíÂèÇÁÖß„Åô„Çã <code>balanceOf()</code>Ôºå<code>ownerOf</code> Èñ¢Êï∞</li>
<li>Âêå„Åò„Åè„ÅÜ„Åà„ÅßÂÆöÁæ©„Åó„Å¶„ÅÇ„Å£„ÅüÂ§âÊï∞„ÇíÂèÇÁÖß„Åô„Çã <code>name()</code>Ôºå<code>symbol()</code> Èñ¢Êï∞</li>
<li>tokenURI(„É°„Çø„Éá„Éº„Çø) „ÇíÂÆöÁæ©„ÉªÂèÇÁÖß„Åô„Çã„Åü„ÇÅ„ÅÆ <code>tokenURI()</code>Ôºå<code>_baseURI()</code> Èñ¢Êï∞</li>
</ul>
<blockquote>
<p>ÊúÄÂæå„ÅÆ <code>_baseURI()</code> Èñ¢Êï∞„Å´„Å§„ÅÑ„Å¶„ÅØÂ∞ë„ÅóÁâπÊÆä„ÅßÔºå„Åì„ÅÆÈñ¢Êï∞„ÅØ„Åã„Å™„ÇäÁ∞°Âçò„Å™‰Ωú„Çä„Å´„Å™„Å£„Å¶„Åä„ÇäÔºå‰ΩúÊàêËÄÖ„Å´„Çà„Å£„Å¶„É°„Çø„Éá„Éº„Çø„ÅÆÊâ±„ÅÑ„ÇíÂ§ß„Åç„ÅèÂ§â„Åà„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„ÅôÔºé
‰æã„Åà„Å∞Ôºå<code>return &quot;&quot;</code> ÂÜÖ„Å´‰ªªÊÑè„ÅÆ URL „ÇíÂÖ•Âäõ„Åó„Å¶„Åä„Åë„Å∞Âçò„Å´„Åù„ÅÆ„Ç¢„Éâ„É¨„Çπ„Åã„ÇâÂèñÂæó„Åß„Åç„ÇãÁîªÂÉè„ÇíË°®Á§∫„Åô„Çã„Å®„ÅÑ„ÅÜÂÆüË£Ö„Å´„Å™„ÇäÔºå‰ªñÊñπÈñ¢Êï∞Â§ñ„Å´ <code>string private baseURI</code> „Å™„Å©„ÅÆÂ§âÊï∞Ôºå„Åù„Åó„Å¶Â§âÊï∞„ÇíÊõ∏„ÅçÊèõ„Åà„ÇãÈñ¢Êï∞„ÇíÂÆöÁæ©„ÅóÔºå<code>return &quot;&quot;</code> ÈÉ®ÂàÜ„Çí <code>return baseURI</code> „Å®„Åó„Å¶ <code>name()</code> Â§âÊï∞„Å®ÂêåÊßò„Å´„Åù„ÅÆÂ§âÊï∞„ÇíÂëº„Å≥Âá∫„Åô„Çà„ÅÜ„Å™ÂΩ¢„Å´„Åó„Å¶„Åä„Åë„Å∞Ôºå„É°„Çø„Éá„Éº„Çø„ÇíÂæå„ÄÖÂ§âÊõ¥„Åô„Çã„Åì„Å®„ÅåÂèØËÉΩ„Å™ NFT „ÇíÂÆüË£Ö„Åß„Åç„Åæ„ÅôÔºé</p>
</blockquote>
<pre><code class="lang-javascript">    <span class="hljs-comment">// ERC165„ÅÆÊú¨‰ΩìÔºé</span>
    <span class="hljs-comment">// ÂºïÊï∞„Å´Âèñ„Å£„ÅüinterfaceId(interface „ÅÆË≠òÂà•Â≠ê)„ÅåÔºåERC165„ÅåÂÆüË£Ö„Åï„Çå„Åü„Ç≥„É≥„Éà„É©„ÇØ„Éà„Åæ„Åü„ÅØ</span>
    <span class="hljs-comment">// ÂÆüË£Ö„Åó„Åü„Ç≥„É≥„Éà„É©„ÇØ„Éà„Å´Á∂ôÊâø„Åó„Åü„Ç≥„É≥„Éà„É©„ÇØ„ÉàÂÜÖ„Å´ÂÆüË£Ö„Åï„Çå„Å¶„ÅÑ„Çã„ÅãË™ø„Åπ„Çã„Åì„Å®„Åå„Åß„Åç„ÇãÔºé</span>
    <span class="hljs-comment">// ÂÖ∑‰ΩìÁöÑ„Å´„ÅØÔºå„Åæ„ÅöÔºåERC165„ÇíÂÆüË£Ö„Åó„Åü„Ç≥„É≥„Éà„É©„ÇØ„ÉàÂÜÖ„ÅßERC165ÂÜÖ„ÅßÂÆöÁæ©„Åï„Çå„ÅüsupportsInterface(bytes4 interfaceId)Èñ¢Êï∞„Çí„Ç™„Éº„Éê„Éº„É©„Ç§„Éâ„Åó„Å¶Ôºå</span>
    <span class="hljs-comment">// ÂÆüË£Ö„Åó„Åü„Ç≥„É≥„Éà„É©„ÇØ„Éà„Å´Á∂ôÊâø„Åô„Çã„Ç§„É≥„Çø„Éº„Éï„Çß„Ç§„Çπ„ÅÆID„Å®ÂºïÊï∞„Å®„ÅÆÁ≠â‰æ°ÊºîÁÆóÂÖ®Á®Æ„ÇíË°å„ÅÑÔºå</span>
    <span class="hljs-comment">// Á∂ôÊâø„Åï„Çå„Å¶„ÅÑ„Çã„Ç≥„É≥„Éà„É©„ÇØ„Éà„ÅÆ‰∏≠„Å´ERC165„ÅåÂÆüË£Ö„Åï„Çå„Å¶„ÅÑ„ÅüÂ†¥ÂêàÔºå„Åù„ÅÆ„Ç≥„É≥„Éà„É©„ÇØ„Éà„Åß„ÇÇÂêåÊßò„Å™Á≠â‰æ°ÊºîÁÆóÂÖ®Á®Æ„ÇíË°å„ÅÜÔºé</span>
    <span class="hljs-comment">// ÊúÄÂæå„Å´Ë°å„Çè„Çå„ÅüÂÖ®„Å¶„ÅÆÁ≠â‰æ°ÊºîÁÆó„ÅÆÁµêÊûú„ÅÆË´ñÁêÜÂíå„Çí„Å®„Å£„Å¶ÔºåËøî„ÇäÂÄ§„Å®„Åó„Å¶Ëøî„Åó„Å¶„ÅÑ„ÇãÔºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>See {IERC165-supportsInterface}.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">supportsInterface</span>(<span class="hljs-params">bytes4 interfaceId</span>) <span class="hljs-title">public</span> <span class="hljs-title">view</span> <span class="hljs-title">virtual</span> <span class="hljs-title">override</span>(<span class="hljs-params">ERC165, IERC165</span>) <span class="hljs-title">returns</span> (<span class="hljs-params">bool</span>) </span>{
        <span class="hljs-keyword">return</span>
            interfaceId == type(IERC721).interfaceId ||
            interfaceId == type(IERC721Metadata).interfaceId ||
            <span class="hljs-built_in">super</span>.supportsInterface(interfaceId);
    }

    <span class="hljs-comment">// ‰∏ä„ÅßÂÆöÁæ©„Åó„Åü_balances„Éû„ÉÉ„Éî„É≥„Ç∞„ÅÆ‰∏≠Ë∫´„ÇíÂèÇÁÖß„Åô„ÇãÈñ¢Êï∞Ôºé</span>
    <span class="hljs-comment">// „Ç¢„Éâ„É¨„Çπ„Åå„ÇÇ„Å§(„Åì„ÅÆ„Ç≥„É≥„Éà„É©„ÇØ„Éà„ÅßË¶èÂÆö„Åï„Çå„Åü)NFT„ÅÆÁ∑èÊï∞„ÇíËøî„ÅôÔºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>See {IERC721-balanceOf}.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">balanceOf</span>(<span class="hljs-params">address owner</span>) <span class="hljs-title">public</span> <span class="hljs-title">view</span> <span class="hljs-title">virtual</span> <span class="hljs-title">override</span> <span class="hljs-title">returns</span> (<span class="hljs-params">uint256</span>) </span>{
        <span class="hljs-built_in">require</span>(owner != address(<span class="hljs-number">0</span>), <span class="hljs-string">&quot;ERC721: address zero is not a valid owner&quot;</span>);
        <span class="hljs-keyword">return</span> _balances[owner];
    }

    <span class="hljs-comment">// ‰∏ä„ÅßÂÆöÁæ©„Åó„Åü_owners„Éû„ÉÉ„Éî„É≥„Ç∞„ÅÆ‰∏≠Ë∫´„ÇíÂèÇÁÖß„Åô„ÇãÈñ¢Êï∞Ôºé</span>
    <span class="hljs-comment">// ÂºïÊï∞„Å´„Å®„Å£„Åü„Éà„Éº„ÇØ„É≥ID„ÅÆNFT(„ÇÇ„Å°„Çç„Çì„Åì„Çå„ÇÇ„Åì„ÅÆ„Ç≥„É≥„Éà„É©„ÇØ„Éà„ÅßË¶èÂÆö„Åï„Çå„Åü„ÇÇ„ÅÆ„ÅÆId„ÅÆ„Åì„Å®)„ÅÆÊâÄÊúâËÄÖ„Å®„Å™„Å£„Å¶„ÅÑ„Çã„Ç¢„Éâ„É¨„Çπ„ÇíËøî„ÅôÔºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>See {IERC721-ownerOf}.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ownerOf</span>(<span class="hljs-params">uint256 tokenId</span>) <span class="hljs-title">public</span> <span class="hljs-title">view</span> <span class="hljs-title">virtual</span> <span class="hljs-title">override</span> <span class="hljs-title">returns</span> (<span class="hljs-params">address</span>) </span>{
        address owner = _owners[tokenId];
        <span class="hljs-built_in">require</span>(owner != address(<span class="hljs-number">0</span>), <span class="hljs-string">&quot;ERC721: invalid token ID&quot;</span>);
        <span class="hljs-keyword">return</span> owner;
    }

    <span class="hljs-comment">// ‰∏ä„ÅßÂÆöÁæ©„Åó„Åü„Éà„Éº„ÇØ„É≥Âêç„ÇíÂèÇÁÖß„Åô„ÇãÈñ¢Êï∞Ôºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>See {IERC721Metadata-name}.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">name</span>(<span class="hljs-params"></span>) <span class="hljs-title">public</span> <span class="hljs-title">view</span> <span class="hljs-title">virtual</span> <span class="hljs-title">override</span> <span class="hljs-title">returns</span> (<span class="hljs-params">string memory</span>) </span>{
        <span class="hljs-keyword">return</span> _name;
    }

    <span class="hljs-comment">// Âêå„Åò„Åè„ÅÜ„Åà„ÅßÂÆöÁæ©„Åó„Åü„Éà„Éº„ÇØ„É≥„Ç∑„É≥„Éú„É´„ÇíÂèÇÁÖß„Åô„ÇãÈñ¢Êï∞</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>See {IERC721Metadata-symbol}.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">symbol</span>(<span class="hljs-params"></span>) <span class="hljs-title">public</span> <span class="hljs-title">view</span> <span class="hljs-title">virtual</span> <span class="hljs-title">override</span> <span class="hljs-title">returns</span> (<span class="hljs-params">string memory</span>) </span>{
        <span class="hljs-keyword">return</span> _symbol;
    }

    <span class="hljs-comment">// ‰∏ã„ÅßÂÆöÁæ©„Åô„Çã_baseURI()Èñ¢Êï∞„ÅÆËøî„ÇäÂÄ§„ÇíÂèÇÁÖß„Åô„ÇãÈñ¢Êï∞Ôºé</span>
    <span class="hljs-comment">// „Åì„ÅÆËøî„ÇäÂÄ§Ôºå„Åô„Å™„ÅØ„Å°_baseURI()Èñ¢Êï∞„ÅÆ‰∏≠Ë∫´„Åå‰øó„Å´„ÅÑ„ÅÜ„É°„Çø„Éá„Éº„Çø„Åß„ÅÇ„ÇãÔºé</span>
    <span class="hljs-comment">// ÂÆüÈöõ„Å´„ÅØ„Åù„Çå„Å†„Åë„Åß„ÅØ„Å™„ÅèÔºå_requireMintedÈñ¢Êï∞„Åß„Éü„É≥„Éà„Åï„Çå„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç„Åï„Çå„Åü„ÇäÔºå</span>
    <span class="hljs-comment">// returnÊôÇ„Å´„É°„Çø„Éá„Éº„Çø„ÅåÁ©∫„Åß„Å™„ÅÑ„ÅãÁ¢∫Ë™ç„Åï„Çå„Åü„Çä„Åó„Å¶„ÅÑ„ÇãÔºé</span>
    <span class="hljs-comment">// „Åù„Çå„ÇíÊ∫Ä„Åü„Åï„Å™„Åã„Å£„ÅüÂ†¥ÂêàÔºårevert„Åï„Çå„Çã„Åì„Å®„Å´„Å™„ÇãÔºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>See {IERC721Metadata-tokenURI}.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tokenURI</span>(<span class="hljs-params">uint256 tokenId</span>) <span class="hljs-title">public</span> <span class="hljs-title">view</span> <span class="hljs-title">virtual</span> <span class="hljs-title">override</span> <span class="hljs-title">returns</span> (<span class="hljs-params">string memory</span>) </span>{
        _requireMinted(tokenId);

        string memory baseURI = _baseURI();
        <span class="hljs-keyword">return</span> bytes(baseURI).length &gt; <span class="hljs-number">0</span> ? string(abi.encodePacked(baseURI, tokenId.toString())) : <span class="hljs-string">&quot;&quot;</span>;
    }

    <span class="hljs-comment">// ‰∏ä„ÅßË®ÄÂèä„Åó„Åü„É°„Çø„Éá„Éº„Çø„ÅÆ‰∏≠Ë∫´Ôºé</span>
    <span class="hljs-comment">// ÂàùÊúüÂÄ§„Åß„ÅØÁ©∫„Å´„Å™„Å£„Å¶„ÅÑ„Çã(Á©∫string„ÇíËøî„Åô)Ôºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>Base URI for computing {tokenURI}. If set, the resulting URI for each
     * token will be the concatenation of the `baseURI` and the `tokenId`. Empty
     * by default, can be overridden in child contracts.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_baseURI</span>(<span class="hljs-params"></span>) <span class="hljs-title">internal</span> <span class="hljs-title">view</span> <span class="hljs-title">virtual</span> <span class="hljs-title">returns</span> (<span class="hljs-params">string memory</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;
    }
</code></pre>
<h3 id="33-‰∏ªË¶Å„Å™Ê©üËÉΩ„ÅÆÁô∫Âãï„ÇíÊãÖ„ÅÜÊ®ôÊ∫ñÊê≠ËºâÈñ¢Êï∞Áæ§">3.3. ‰∏ªË¶Å„Å™Ê©üËÉΩ„ÅÆÁô∫Âãï„ÇíÊãÖ„ÅÜÊ®ôÊ∫ñÊê≠ËºâÈñ¢Êï∞Áæ§</h3>
<p>Ê¨°„Å´Ë®òËø∞„Åï„Çå„Å¶„ÅÑ„Åè„ÅÆ„ÅØÔºå‰∏ªË¶Å„Å™Ê©üËÉΩ„ÅÆÁô∫Âãï„ÇíÊãÖ„ÅÜÈñ¢Êï∞Áæ§„Åß„ÅôÔºé
Áô∫Âãï„Å®Ë°®„Åó„Åü„ÅÆ„ÅØÔºå„Åì„Çå„Çâ„ÅÆÈñ¢Êï∞Áæ§„ÅÆÊåôÂãï„ÅØ <code>internal</code> Èñ¢Êï∞„ÇíÂëº„Å≥Âá∫„ÅôÂΩ¢„ÅßÂ§ñÈÉ®„Å´Ë®òËø∞„Åï„Çå„Å¶„ÅÑ„Çã„Åã„Çâ„Åß„ÅôÔºé
„Åù„Çå„Çâ„ÅÆÈñ¢Êï∞„ÇíÂëº„Å≥Âá∫„Åô„Åª„Åã„Å´„ÅØÔºå <code>require</code> Êñá„ÅßÁô∫ÂãïÊôÇ„ÅÆÊù°‰ª∂„Çí‰ªòÂä†„Åó„Åü„ÇäÔºåÂëº„Å≥Âá∫„Åó„Å´ÂøÖË¶Å„Å™„É≠„Éº„Ç´„É´Â§âÊï∞„ÇíÂÆöÁæ©„Åó„Åü„Çä„Åó„Å¶„ÅÑ„Åæ„ÅôÔºé</p>
<ul>
<li>token ÁßªÈÄÅË®±ÂèØ„Å´Èñ¢‰øÇ„Åô„Çã <code>approve()</code>Ôºå<code>getApproved()</code>Ôºå<code>setApprovalForAll()</code>Ôºå<code>isApprovedForAll</code> Èñ¢Êï∞</li>
<li>Ë®±ÂèØ„ÇíÂèó„Åë„ÅüÁßªÈÄÅ„ÇíÂÆüÈöõ„Å´Ë°å„ÅÜ <code>transferFrom()</code>Ôºå<code>safeTransferFrom()</code> Èñ¢Êï∞</li>
</ul>
<pre><code class="lang-javascript">    <span class="hljs-comment">// token„ÅÆÁèæowner„Ååto„Ç¢„Éâ„É¨„Çπ„Å´ÂØæ„Åó„Å¶token„ÅÆÁßªÈÄÅË®±ÂèØ„Çí‰∏é„Åà„ÇãÈñ¢Êï∞</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>See {IERC721-approve}.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">approve</span>(<span class="hljs-params">address to, uint256 tokenId</span>) <span class="hljs-title">public</span> <span class="hljs-title">virtual</span> <span class="hljs-title">override</span> </span>{
        <span class="hljs-comment">// tokenId„ÅÆowner„Çí„Éû„ÉÉ„Éî„É≥„Ç∞„Åã„ÇâÂèÇÁÖß</span>
        address owner = ERC721.ownerOf(tokenId);
        <span class="hljs-comment">// to„Ç¢„Éâ„É¨„Çπ„Ååowner„Ç¢„Éâ„É¨„Çπ„Å®Âêå‰∏Ä„Åß„Å™„ÅÑ„ÅãÁ¢∫Ë™çÔºé</span>
        <span class="hljs-comment">// Âêå‰∏Ä„Å™„ÇârevertÔºé</span>
        <span class="hljs-built_in">require</span>(to != owner, <span class="hljs-string">&quot;ERC721: approval to current owner&quot;</span>);


        <span class="hljs-comment">// „Éà„É©„É≥„Ç∂„ÇØ„Ç∑„Éß„É≥ÈÄÅ‰ø°ËÄÖ„ÅåÂΩìË©≤token„ÅÆowner„Åæ„Åü„ÅØÁßªÈÄÅË®±ÂèØ„ÇíÂèó„Åë„ÅüËÄÖ„Åß„ÅÇ„Çã„ÅãÁ¢∫Ë™ç</span>
        <span class="hljs-built_in">require</span>(
            _msgSender() == owner || isApprovedForAll(owner, _msgSender()),
            <span class="hljs-string">&quot;ERC721: approve caller is not token owner or approved for all&quot;</span>
        );

        <span class="hljs-comment">// ÁßªÈÄÅË®±ÂèØÊÉÖÂ†±„ÅåË®òÈå≤„Åï„Çå„Å¶„ÅÑ„Çã„Éû„ÉÉ„Éî„É≥„Ç∞„ÇíÊõ¥Êñ∞</span>
        _approve(to, tokenId);
    }

    <span class="hljs-comment">// tokenÁßªÈÄÅË®±ÂèØÊÉÖÂ†±„ÇíÂèÇÁÖß„Åô„ÇãÈñ¢Êï∞Ôºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>See {IERC721-getApproved}.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getApproved</span>(<span class="hljs-params">uint256 tokenId</span>) <span class="hljs-title">public</span> <span class="hljs-title">view</span> <span class="hljs-title">virtual</span> <span class="hljs-title">override</span> <span class="hljs-title">returns</span> (<span class="hljs-params">address</span>) </span>{
        <span class="hljs-comment">// mint„Åï„Çå„Å¶„ÅÑ„Çã„ÇÇ„ÅÆ„Åã„ÇíÁ¢∫Ë™ç</span>
        _requireMinted(tokenId);

        <span class="hljs-comment">// ÁßªÈÄÅË®±ÂèØÊÉÖÂ†±„ÅåË®òÈå≤„Åï„Çå„Å¶„ÅÑ„Çã„Éû„ÉÉ„Éî„É≥„Ç∞„ÇíÂèÇÁÖß</span>
        <span class="hljs-keyword">return</span> _tokenApprovals[tokenId];
    }

    <span class="hljs-comment">// tokenÁßªÈÄÅË®±ÂèØ„Çí‰∏é„Åà„ÇãÈñ¢Êï∞Ôºé</span>
    <span class="hljs-comment">// approve„Çà„Çä‰∏ä‰Ωç„ÅÆË®±ÂèØ„Å®„Åó„Å¶ÂÆöÁæ©„Åï„Çå„Å¶„ÅÑ„ÇãÊ®°Êßò</span>
    <span class="hljs-comment">// „Éá„Éï„Ç©„É´„Éà„Åß„ÅØ‰Ωø„ÅÑÈÅì„Åå„Å™„ÅÑ„ÅåÔºåËøΩÂä†ÂÆüË£Ö„ÅßÊ¥ª„Åç„Å¶„Åè„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„ÇãÔºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>See {IERC721-setApprovalForAll}.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setApprovalForAll</span>(<span class="hljs-params">address operator, bool approved</span>) <span class="hljs-title">public</span> <span class="hljs-title">virtual</span> <span class="hljs-title">override</span> </span>{
        <span class="hljs-comment">// ÊåôÂãï„ÇíÂè∏„ÇãÂ≠êÈñ¢Êï∞„ÇíÂëº„Å≥Âá∫„Åó„Å¶„ÅÑ„Çã</span>
        _setApprovalForAll(_msgSender(), operator, approved);
    }

    <span class="hljs-comment">// operator„Å®„Åó„Å¶Ê∏°„Åï„Çå„Åü„Ç¢„Éâ„É¨„Çπ„Åå‰∏ä‰ΩçË®±ÂèØ``_operatorApprovals`` „ÇíÊúâ„Åó„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç„Åô„ÇãÈñ¢Êï∞Ôºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>See {IERC721-isApprovedForAll}.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isApprovedForAll</span>(<span class="hljs-params">address owner, address operator</span>) <span class="hljs-title">public</span> <span class="hljs-title">view</span> <span class="hljs-title">virtual</span> <span class="hljs-title">override</span> <span class="hljs-title">returns</span> (<span class="hljs-params">bool</span>) </span>{
        <span class="hljs-comment">// ÁßªÈÄÅË®±ÂèØÊÉÖÂ†±„ÅåË®òÈå≤„Åï„Çå„Å¶„ÅÑ„Çã„Éû„ÉÉ„Éî„É≥„Ç∞„ÇíÂèÇÁÖß</span>
        <span class="hljs-keyword">return</span> _operatorApprovals[owner][operator];
    }

    <span class="hljs-comment">// ÁßªÈÄÅË®±ÂèØ„Å´Ê∫ñ„Åò„ÅütokenÁßªÈÄÅ„ÇíË°å„ÅÜÈñ¢Êï∞</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>See {IERC721-transferFrom}.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">transferFrom</span>(<span class="hljs-params">
        address <span class="hljs-keyword">from</span>,
        address to,
        uint256 tokenId
    </span>) <span class="hljs-title">public</span> <span class="hljs-title">virtual</span> <span class="hljs-title">override</span> </span>{
        <span class="hljs-comment">//solhint-disable-next-line max-line-length</span>
        <span class="hljs-comment">// ÁßªÈÄÅË®±ÂèØ„Åå„ÅÇ„Çã„Åã„Å©„ÅÜ„Åã„ÇíÁ¢∫Ë™ç</span>
        <span class="hljs-built_in">require</span>(_isApprovedOrOwner(_msgSender(), tokenId), <span class="hljs-string">&quot;ERC721: caller is not token owner or approved&quot;</span>);

        <span class="hljs-comment">// ÊåôÂãï„ÇíÂè∏„ÇãÂ≠êÈñ¢Êï∞„ÇíÂëº„Å≥Âá∫„Åó„Å¶„ÅÑ„Çã</span>
        _transfer(<span class="hljs-keyword">from</span>, to, tokenId);
    }

    <span class="hljs-comment">// transferFromÈñ¢Êï∞„Å´ERC165„ÇíÈÅ©Áî®„Åó„ÅüÈñ¢Êï∞Ôºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>See {IERC721-safeTransferFrom}.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">safeTransferFrom</span>(<span class="hljs-params">
        address <span class="hljs-keyword">from</span>,
        address to,
        uint256 tokenId
    </span>) <span class="hljs-title">public</span> <span class="hljs-title">virtual</span> <span class="hljs-title">override</span> </span>{
        <span class="hljs-comment">// Áõ¥‰∏ã„ÅÆÈñ¢Êï∞„ÇíÂëº„Å≥Âá∫„Åó„Å¶„ÅÑ„Çã</span>
        safeTransferFrom(<span class="hljs-keyword">from</span>, to, tokenId, <span class="hljs-string">&quot;&quot;</span>);
    }

    <span class="hljs-comment">// caldata„ÇíÂºïÊï∞„Å®„Åó„Å¶Ê∏°„Åô„Åü„ÇÅ„Å´Áõ¥‰∏ä„ÅÆsafeTransferFrom„ÅåÂàÜÂâ≤„Åï„Çå„Åü„ÇÇ„ÅÆÔºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>See {IERC721-safeTransferFrom}.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">safeTransferFrom</span>(<span class="hljs-params">
        address <span class="hljs-keyword">from</span>,
        address to,
        uint256 tokenId,
        bytes memory data
    </span>) <span class="hljs-title">public</span> <span class="hljs-title">virtual</span> <span class="hljs-title">override</span> </span>{
        <span class="hljs-comment">// ÁßªÈÄÅË®±ÂèØ„Åå„ÅÇ„Çã„Åã„Å©„ÅÜ„Åã„ÇíÁ¢∫Ë™ç</span>
        <span class="hljs-built_in">require</span>(_isApprovedOrOwner(_msgSender(), tokenId), <span class="hljs-string">&quot;ERC721: caller is not token owner or approved&quot;</span>);
        <span class="hljs-comment">// ÊåôÂãï„ÇíÂè∏„ÇãÈñ¢Êï∞„ÇíÂëº„Å≥Âá∫„Åó„Å¶„ÅÑ„Çã</span>
        _safeTransfer(<span class="hljs-keyword">from</span>, to, tokenId, data);
    }
</code></pre>
<h3 id="34-ÊåôÂãï„ÇíÂè∏„ÇãÈñ¢Êï∞Áæ§ÔºåËøΩÂä†ÂÆüË£Ö„ÅÆ„Åü„ÇÅ„ÅÆÈñ¢Êï∞Áæ§">3.4. ÊåôÂãï„ÇíÂè∏„ÇãÈñ¢Êï∞Áæ§ÔºåËøΩÂä†ÂÆüË£Ö„ÅÆ„Åü„ÇÅ„ÅÆÈñ¢Êï∞Áæ§</h3>
<p>ÊÆã„Çã„ÅØÔºå‰∏äË®ò„ÅÆÊ©üËÉΩÁô∫ÂãïÈñ¢Êï∞Áæ§„Å´Âëº„Å≥Âá∫„Åï„Çå„ÇãÈñ¢Êï∞„Å®Ôºå„ÅÑ„Åè„Å§„Åã„ÅÆËøΩÂä†ÂÆüË£Ö„Çí„Çµ„Éù„Éº„Éà„Åô„ÇãÈñ¢Êï∞„ÇíÊÆã„Åô„ÅÆ„Åø„Å®„Å™„Çä„Åæ„Åó„Åü
Ôºé
Áõ¥‰∏ã„Å´Êåô„Åí„Çã„ÅÆ„ÅØÔºåÂÖ®„Å¶ÊåôÂãï„ÇíÂè∏„ÇãÈñ¢Êï∞„Åß„ÅôÔºé
<code>_exists</code> „Å†„ÅëÔºåÂàùÂá∫„ÅÆÈñ¢Êï∞„ÅßÔºåÂõ∞ÊÉë„Åô„ÇãÊñπ„Åå„Åß„Å™„ÅÑ„Çà„ÅÜ„Åì„Å®„Çè„Å£„Å¶„Åä„Åè„Å®Ôºå<code>_requireMinted</code> „ÅÆÊåôÂãï„ÇíÂè∏„Çã„ÇÇ„ÅÆ„Åß„ÅôÔºé</p>
<ul>
<li><code>_safeTransfer()</code>Ôºå<code>_exists()</code>Ôºå<code>_isApprovedOrOwner()</code>Ôºå<code>_transfer()</code>Ôºå<code>_approve()</code>Ôºå<code>_setApprovalForAll()</code>Ôºå<code>_requireMinted()</code>Ôºå<code>_checkOnERC721Received()</code></li>
</ul>
<p>„Åù„Åó„Å¶Áõ¥‰∏ã„ÅÆ 3 Èñ¢Êï∞„ÅØÔºåÊ∫ñÊ®ôÊ∫ñÈñ¢Êï∞„ÅÆÊåôÂãï„ÇíÂè∏„Çã„ÇÇ„ÅÆ„Å®„ÅÑ„Åà„Çã„Åß„Åó„Çá„ÅÜÔºé
ÊåôÂãï„ÇíÂëº„Å≥Âá∫„Åô <code>safeMint()</code>Ôºå<code>burn()</code> „ÅÆ„Çà„ÅÜ„Å™Èñ¢Êï∞ÂÜÖ„Åß„Åì„Çå„Çâ„ÇíÂëº„Å≥Âá∫„Åó„Å¶„Åä„Åë„Å∞‰Ωø„Åà„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„ÅôÔºé
mint Á≥ª„ÅÆ 2 „Å§„Å´„Å§„ÅÑ„Å¶„ÅØÔºåNFT „ÅÆÁô∫Ë°å„ÅÆ„Åü„ÇÅ„Å´„ÅÑ„Åö„Çå„Åã„ÇíÂøÖ„ÅöÂÆüË°å„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÅåÔºå<code>constructor</code> ÂÜÖ„ÅßÂëº„Å≥Âá∫„Åô„Åì„Å®„ÅåÂèØËÉΩ„Å™„Åü„ÇÅÔºåÁõ¥„Ç≥„É≥„Åß„Åç„ÇãÊ©üËÉΩÁô∫Âãï„ÅÆ„Åü„ÇÅ„ÅÆ <code>public</code> Èñ¢Êï∞„Å®„Åó„Å¶ÂÆöÁæ©„Åó„Å¶„Åä„ÅèÂøÖË¶Å„ÅØ„ÅÇ„Çä„Åæ„Åõ„ÇìÔºé</p>
<blockquote>
<p>„Åì„ÅÆ„ÅÇ„Åü„Çä„Å´„Å§„ÅÑ„Å¶„Ç≥„É©„É†„ÅßËß¶„Çå„Å¶„ÅÑ„Çã„ÅÆ„ÅßÔºåÊ∞ó„Å´„Å™„ÇãÊñπ„ÅØ<a href>4 Á´†</a>„ÇíÂèÇÁÖß„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºé</p>
</blockquote>
<ul>
<li><code>_safeMint()</code>Ôºå<code>_mint()</code>Ôºå<code>_burn()</code></li>
</ul>
<p>ÊÆã„ÇãÁõ¥‰∏ã„ÅÆ 2 Èñ¢Êï∞„Å´„Å§„ÅÑ„Å¶„ÅØÔºå „Éà„Éº„ÇØ„É≥„ÅÆÁßªÂãï„ÅåË°å„Çè„Çå„Çã <code>_mint()</code>Ôºå<code>_transfer()</code> Èñ¢Êï∞„ÅÆ„É°„ÇΩ„ÉÉ„ÉâÂÆüË°åÂâç„Å®ÂÆüË°åÂæå„Å´Ë°å„ÅÜÊåôÂãï„ÇíËøΩÂä†„Åô„Çã„Åü„ÇÅ„ÅÆ„ÇÇ„ÅÆ„Å®„Å™„Å£„Å¶„ÅÑ„Åæ„ÅôÔºé</p>
<ul>
<li><code>_beforeTokenTransfer()</code>Ôºå<code>_afterTokenTransfer()</code></li>
</ul>
<pre><code class="lang-javascript">    <span class="hljs-comment">// transferÈñ¢Êï∞„Å´ERC721Rceiver„ÇíÈÅ©Áî®„Åó„ÅüÈñ¢Êï∞Ôºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>Safely transfers `tokenId` token from `from` to `to`, checking first that contract recipients
     * are aware of the ERC721 protocol to prevent tokens from being forever locked.
     *
     * `data` is additional data, it has no specified format and it is sent in call to `to`.
     *
     * This internal function is equivalent to {safeTransferFrom}, and can be used to e.g.
     * implement alternative mechanisms to perform token transfer, such as signature-based.
     *
     * Requirements:
     *
     * - `from` cannot be the zero address.
     * - `to` cannot be the zero address.
     * - `tokenId` token must exist and be owned by `from`.
     * - If `to` refers to a smart contract, it must implement {IERC721Receiver-onERC721Received}, which is called upon a safe transfer.
     *
     * Emits a {Transfer} event.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_safeTransfer</span>(<span class="hljs-params">
        address <span class="hljs-keyword">from</span>,
        address to,
        uint256 tokenId,
        bytes memory data
    </span>) <span class="hljs-title">internal</span> <span class="hljs-title">virtual</span> </span>{
        <span class="hljs-comment">// ÊåôÂãï„ÇíÂè∏„ÇãÂ≠êÈñ¢Êï∞„ÇíÂëº„Å≥Âá∫„Åó„Å¶„ÅÑ„Çã</span>
        _transfer(<span class="hljs-keyword">from</span>, to, tokenId);
        <span class="hljs-comment">// ÈÄÅ‰ø°ÂÖà„Åå„Ç≥„É≥„Éà„É©„ÇØ„Éà„Åß„Åã„Å§ERC721Receiver„ÇíÊé°Áî®„Åó„Å¶„ÅÑ„Å™„ÅÑÂ†¥Âêàrevert„Åô„Çã</span>
        <span class="hljs-built_in">require</span>(_checkOnERC721Received(<span class="hljs-keyword">from</span>, to, tokenId, data), <span class="hljs-string">&quot;ERC721: transfer to non ERC721Receiver implementer&quot;</span>);
    }

    <span class="hljs-comment">// _requireMinted()Èñ¢Êï∞„ÅÆÂ≠êÈñ¢Êï∞Ôºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>Returns whether `tokenId` exists.
     *
     * Tokens can be managed by their owner or approved accounts via {approve} or {setApprovalForAll}.
     *
     * Tokens start existing when they are minted (`_mint`),
     * and stop existing when they are burned (`_burn`).
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_exists</span>(<span class="hljs-params">uint256 tokenId</span>) <span class="hljs-title">internal</span> <span class="hljs-title">view</span> <span class="hljs-title">virtual</span> <span class="hljs-title">returns</span> (<span class="hljs-params">bool</span>) </span>{
        <span class="hljs-comment">// tokenId„ÅÆowner„ÅåÂ≠òÂú®„Åô„Çã„ÅãÁ¢∫Ë™ç„Åó„Å¶„ÅÑ„Çã</span>
        <span class="hljs-comment">// Solidity„Åß„ÅØÂ§ßÊäµ„ÅÆ„Éë„É©„É°„Éº„Çø„ÅÆÂàùÊúüÂÄ§„ÅØ0„Å´„Å™„Å£„Å¶„ÅÑ„Çã„Åü„ÇÅÔºå</span>
        <span class="hljs-comment">// 0„Ç¢„Éâ„É¨„Çπ„Å®Ë©≤ÂΩìId„ÅßÂèÇÁÖß„Åó„Åü_owners[]„Éû„ÉÉ„Éî„É≥„Ç∞„ÅÆËøî„ÇäÂÄ§(_owners[tokenId])„ÇíÁÖßÂêà„Åô„Çã</span>
        <span class="hljs-keyword">return</span> _owners[tokenId] != address(<span class="hljs-number">0</span>);
    }

    <span class="hljs-comment">// ÊñáÂ≠óÈÄö„ÇäÔºåÂºïÊï∞„Ç¢„Éâ„É¨„Çπ„ÅåÂºïÊï∞Id„ÅÆ„Éà„Éº„ÇØ„É≥„ÅÆ„Ç™„Éº„Éä„Éº„ÇÇ„Åó„Åè„ÅØÁßªÈÄÅË®±ÂèØ‰øùÊåÅËÄÖ„Åß„ÅÇ„Çå„Å∞true„ÇíËøî„ÅôÈñ¢Êï∞Ôºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>Returns whether `spender` is allowed to manage `tokenId`.
     *
     * Requirements:
     *
     * - `tokenId` must exist.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_isApprovedOrOwner</span>(<span class="hljs-params">address spender, uint256 tokenId</span>) <span class="hljs-title">internal</span> <span class="hljs-title">view</span> <span class="hljs-title">virtual</span> <span class="hljs-title">returns</span> (<span class="hljs-params">bool</span>) </span>{
        <span class="hljs-comment">// „Éû„ÉÉ„Éî„É≥„Ç∞„ÇíÁî®„ÅÑ„Å¶Id„Åã„Çâ„Ç™„Éº„Éä„Éº„Ç¢„Éâ„É¨„Çπ„ÇíÂèÇÁÖß„Åó„É≠„Éº„Ç´„É´Â§âÊï∞„Å´ÂÆöÁæ©</span>
        address owner = ERC721.ownerOf(tokenId);
        <span class="hljs-comment">// ÂºïÊï∞„ÅÆ„Ç¢„Éâ„É¨„Çπ„Å®„Ç™„Éº„Éä„ÉºÔºå‰∏ä‰ΩçÁßªÈÄÅË®±ÂèØ„ÅÆÊúâÁÑ°Ôºå„Åù„Åó„Å¶ÈÄöÂ∏∏ÁßªÈÄÅË®±ÂèØ„ÅÆÊúâÁÑ°„Å´„Å§„ÅÑ„Å¶„ÅÆÁúüÂÅΩÊºîÁÆó„ÇíË´ñÁêÜÂíå„Å´„Åã„Åë„Çã</span>
        <span class="hljs-keyword">return</span> (spender == owner || isApprovedForAll(owner, spender) || getApproved(tokenId) == spender);
    }

    <span class="hljs-comment">// _mintÈñ¢Êï∞„Å´ERC721Rceiver„ÇíÈÅ©Áî®„Åó„ÅüÈñ¢Êï∞Ôºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>Safely mints `tokenId` and transfers it to `to`.
     *
     * Requirements:
     *
     * - `tokenId` must not exist.
     * - If `to` refers to a smart contract, it must implement {IERC721Receiver-onERC721Received}, which is called upon a safe transfer.
     *
     * Emits a {Transfer} event.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_safeMint</span>(<span class="hljs-params">address to, uint256 tokenId</span>) <span class="hljs-title">internal</span> <span class="hljs-title">virtual</span> </span>{
        <span class="hljs-comment">// Áõ¥‰∏ã„ÅÆÂ≠êÈñ¢Êï∞„ÇíÂëº„Å≥Âá∫„Åó„Å¶„ÅÑ„Çã</span>
        _safeMint(to, tokenId, <span class="hljs-string">&quot;&quot;</span>);
    }

    Áõ¥‰∏ä„Åã„ÇâÂëº„Å≥Âá∫„Åï„Çå„ÇãÂ≠êÈñ¢Êï∞Ôºé
    ERC721Rceiver„ÇíÈÅ©Áî®„Åó„Å¶„ÅÑ„ÇãÔºé
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>Same as {xref-ERC721-_safeMint-address-uint256-}[`_safeMint`], with an additional `data` parameter which is
     * forwarded in {IERC721Receiver-onERC721Received} to contract recipients.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_safeMint</span>(<span class="hljs-params">
        address to,
        uint256 tokenId,
        bytes memory data
    </span>) <span class="hljs-title">internal</span> <span class="hljs-title">virtual</span> </span>{
        <span class="hljs-comment">// ÊåôÂãï„ÇíÂè∏„ÇãÂ≠êÈñ¢Êï∞„ÇíÂëº„Å≥Âá∫„Åó„Å¶„ÅÑ„Çã</span>
        _mint(to, tokenId);
        <span class="hljs-comment">// ERC721Receiver„ÅÆ„É°„ÇΩ„ÉÉ„Éâ„ÇíÂëº„Å≥Âá∫„Åó„Å¶„ÅÑ„Çã</span>
        <span class="hljs-built_in">require</span>(
            _checkOnERC721Received(address(<span class="hljs-number">0</span>), to, tokenId, data),
            <span class="hljs-string">&quot;ERC721: transfer to non ERC721Receiver implementer&quot;</span>
        );
    }

    <span class="hljs-comment">// „Éà„Éº„ÇØ„É≥„Éü„É≥„Éà„ÇíË°å„ÅÜÊôÇ„Å´ÂÆüË°å„Åï„Çå„Çã„É°„ÇΩ„ÉÉ„ÉâÔºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>Mints `tokenId` and transfers it to `to`.
     *
     * WARNING: Usage of this method is discouraged, use {_safeMint} whenever possible
     *
     * Requirements:
     *
     * - `tokenId` must not exist.
     * - `to` cannot be the zero address.
     *
     * Emits a {Transfer} event.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_mint</span>(<span class="hljs-params">address to, uint256 tokenId</span>) <span class="hljs-title">internal</span> <span class="hljs-title">virtual</span> </span>{
        <span class="hljs-comment">// „Éü„É≥„ÉàÂÖà„Åå0„Ç¢„Éâ„É¨„Çπ„Åß„Å™„ÅÑ„Åì„Å®„ÇíÁ¢∫Ë™ç</span>
        <span class="hljs-built_in">require</span>(to != address(<span class="hljs-number">0</span>), <span class="hljs-string">&quot;ERC721: mint to the zero address&quot;</span>);
        <span class="hljs-comment">// Êó¢„Å´„Éü„É≥„Éà„Åï„Çå„Å¶„ÅÑ„Å™„ÅÑ„ÅãÁ¢∫Ë™ç„Åô„ÇãÂ≠êÈñ¢Êï∞„ÇíÂëº„Å≥Âá∫„Åó„Å¶„ÅÑ„Çã</span>
        <span class="hljs-built_in">require</span>(!_exists(tokenId), <span class="hljs-string">&quot;ERC721: token already minted&quot;</span>);

        <span class="hljs-comment">// „Éà„Éº„ÇØ„É≥„ÅÆÁßªÂãïÂâç„Å´ÂÆüË°å„Åï„Çå„Çã„É°„ÇΩ„ÉÉ„Éâ„ÇíÂëº„Å≥Âá∫„Åô</span>
        _beforeTokenTransfer(address(<span class="hljs-number">0</span>), to, tokenId);

        <span class="hljs-comment">// Èñ¢‰øÇ„Åô„Çã„Éû„ÉÉ„Éî„É≥„Ç∞„ÅÆÂÄ§„ÇíÈÅ©Âàá„Å´Â§âÊõ¥„Åó„Å¶„ÅÑ„Çã</span>
        _balances[to] += <span class="hljs-number">1</span>;
        _owners[tokenId] = to;

        <span class="hljs-comment">// „Éï„É≠„É≥„Éà„Ç®„É≥„ÉâÁ≠â„Å´Âêë„Åë„Åüevent„Çíemit„Åó„Å¶„ÅÑ„Çã</span>
        emit Transfer(address(<span class="hljs-number">0</span>), to, tokenId);

        <span class="hljs-comment">// „Éà„Éº„ÇØ„É≥„ÅÆÁßªÂãïÂæå„Å´ÂÆüË°å„Åï„Çå„Çã„É°„ÇΩ„ÉÉ„Éâ„ÇíÂëº„Å≥Âá∫„Åô</span>
        _afterTokenTransfer(address(<span class="hljs-number">0</span>), to, tokenId);
    }

    <span class="hljs-comment">// „Éà„Éº„ÇØ„É≥„Çíburn„Åô„ÇãÈñ¢Êï∞</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>Destroys `tokenId`.
     * The approval is cleared when the token is burned.
     * This is an internal function that does not check if the sender is authorized to operate on the token.
     *
     * Requirements:
     *
     * - `tokenId` must exist.
     *
     * Emits a {Transfer} event.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_burn</span>(<span class="hljs-params">uint256 tokenId</span>) <span class="hljs-title">internal</span> <span class="hljs-title">virtual</span> </span>{
        <span class="hljs-comment">// ÂºïÊï∞„Çí„É≠„Éº„Ç´„É´Â§âÊï∞„Å´Ê†ºÁ¥ç</span>
        address owner = ERC721.ownerOf(tokenId);

        <span class="hljs-comment">// „Éà„Éº„ÇØ„É≥„ÅÆÁßªÂãïÂâç„Å´ÂÆüË°å„Åï„Çå„Çã„É°„ÇΩ„ÉÉ„Éâ„ÇíÂëº„Å≥Âá∫„Åô</span>
        _beforeTokenTransfer(owner, address(<span class="hljs-number">0</span>), tokenId);

        <span class="hljs-comment">// ÁßªÈÄÅË®±ÂèØ„ÅÆ„Éû„ÉÉ„Éî„É≥„Ç∞„ÅÆ‰∏≠Ë∫´„ÇíÂâäÈô§(ÂÄ§„ÇíÂàùÊúüÂÄ§„ÅÆ0„Å´)„Åó„Å¶„ÅÑ„Çã</span>
        <span class="hljs-comment">// Clear approvals</span>
        <span class="hljs-keyword">delete</span> _tokenApprovals[tokenId];

        <span class="hljs-comment">// Èñ¢‰øÇ„Åô„Çã„Éû„ÉÉ„Éî„É≥„Ç∞„ÇíÈÅ©Âàá„Å´Â§âÊõ¥„Åó„Å¶„ÅÑ„Çã</span>
        _balances[owner] -= <span class="hljs-number">1</span>;
        <span class="hljs-keyword">delete</span> _owners[tokenId];

        <span class="hljs-comment">// „Éï„É≠„É≥„Éà„Ç®„É≥„ÉâÁ≠â„Å´Âêë„Åë„Åüevent„Çíemit„Åó„Å¶„ÅÑ„Çã</span>
        emit Transfer(owner, address(<span class="hljs-number">0</span>), tokenId);

        <span class="hljs-comment">// „Éà„Éº„ÇØ„É≥„ÅÆÁßªÂãïÂæå„Å´ÂÆüË°å„Åï„Çå„Çã„É°„ÇΩ„ÉÉ„Éâ„ÇíÂëº„Å≥Âá∫„Åô</span>
        _afterTokenTransfer(owner, address(<span class="hljs-number">0</span>), tokenId);
    }

    <span class="hljs-comment">// „Éà„Éº„ÇØ„É≥ÁßªÈÄÅ„ÅÆÊåôÂãï„ÇíÂè∏„ÇãÈñ¢Êï∞</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>Transfers `tokenId` from `from` to `to`.
     *  As opposed to {transferFrom}, this imposes no restrictions on msg.sender.
     *
     * Requirements:
     *
     * - `to` cannot be the zero address.
     * - `tokenId` token must be owned by `from`.
     *
     * Emits a {Transfer} event.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_transfer</span>(<span class="hljs-params">
        address <span class="hljs-keyword">from</span>,
        address to,
        uint256 tokenId
    </span>) <span class="hljs-title">internal</span> <span class="hljs-title">virtual</span> </span>{
        <span class="hljs-comment">// ÂºïÊï∞tokenId„ÅÆ„Éà„Éº„ÇØ„É≥owner„ÅåÂºïÊï∞„ÅÆfrom„Å®‰∏ÄËá¥„Åó„Å¶„ÅÑ„Çã„ÅãÁ¢∫Ë™ç„Åô„Çã</span>
        <span class="hljs-built_in">require</span>(ERC721.ownerOf(tokenId) == <span class="hljs-keyword">from</span>, <span class="hljs-string">&quot;ERC721: transfer from incorrect owner&quot;</span>);
        <span class="hljs-comment">// ÁßªÈÄÅÂÖà„Åå0„Ç¢„Éâ„É¨„Çπ„Åß„Å™„ÅÑ„Åì„Å®„ÇíÁ¢∫Ë™ç</span>
        <span class="hljs-built_in">require</span>(to != address(<span class="hljs-number">0</span>), <span class="hljs-string">&quot;ERC721: transfer to the zero address&quot;</span>);

        <span class="hljs-comment">// „Éà„Éº„ÇØ„É≥„ÅÆÁßªÂãïÂâç„Å´ÂÆüË°å„Åï„Çå„Çã„É°„ÇΩ„ÉÉ„Éâ„ÇíÂëº„Å≥Âá∫„Åô</span>
        _beforeTokenTransfer(<span class="hljs-keyword">from</span>, to, tokenId);

        <span class="hljs-comment">// ÁßªÈÄÅË®±ÂèØ„ÅÆ„Éû„ÉÉ„Éî„É≥„Ç∞„ÅÆ‰∏≠Ë∫´„ÇíÂâäÈô§(ÂÄ§„ÇíÂàùÊúüÂÄ§„ÅÆ0„Å´)„Åó„Å¶„ÅÑ„Çã</span>
        <span class="hljs-comment">// Clear approvals from the previous owner</span>
        <span class="hljs-keyword">delete</span> _tokenApprovals[tokenId];

        <span class="hljs-comment">// Èñ¢‰øÇ„Åô„Çã„Éû„ÉÉ„Éî„É≥„Ç∞„ÇíÈÅ©Âàá„Å´Â§âÊõ¥„Åó„Å¶„ÅÑ„Çã</span>
        _balances[<span class="hljs-keyword">from</span>] -= <span class="hljs-number">1</span>;
        _balances[to] += <span class="hljs-number">1</span>;
        _owners[tokenId] = to;

        <span class="hljs-comment">// „Éï„É≠„É≥„Éà„Ç®„É≥„ÉâÁ≠â„Å´Âêë„Åë„Åüevent„Çíemit„Åó„Å¶„ÅÑ„Çã</span>
        emit Transfer(<span class="hljs-keyword">from</span>, to, tokenId);

        <span class="hljs-comment">// „Éà„Éº„ÇØ„É≥„ÅÆÁßªÂãïÂæå„Å´ÂÆüË°å„Åï„Çå„Çã„É°„ÇΩ„ÉÉ„Éâ„ÇíÂëº„Å≥Âá∫„Åô</span>
        _afterTokenTransfer(<span class="hljs-keyword">from</span>, to, tokenId);
    }

    <span class="hljs-comment">// „Éà„Éº„ÇØ„É≥ÁßªÈÄÅË®±ÂèØ‰ªò‰∏é„ÅÆÊåôÂãï„ÇíÂè∏„ÇãÈñ¢Êï∞Ôºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>Approve `to` to operate on `tokenId`
     *
     * Emits an {Approval} event.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_approve</span>(<span class="hljs-params">address to, uint256 tokenId</span>) <span class="hljs-title">internal</span> <span class="hljs-title">virtual</span> </span>{
        <span class="hljs-comment">// Èñ¢‰øÇ„Åô„Çã„Éû„ÉÉ„Éî„É≥„Ç∞„ÇíÈÅ©Âàá„Å´Â§âÊõ¥„Åó„Å¶„ÅÑ„Çã</span>
        _tokenApprovals[tokenId] = to;
        <span class="hljs-comment">// „Éï„É≠„É≥„Éà„Ç®„É≥„ÉâÁ≠â„Å´Âêë„Åë„Åüevent„Çíemit„Åó„Å¶„ÅÑ„Çã</span>
        emit Approval(ERC721.ownerOf(tokenId), to, tokenId);
    }

    <span class="hljs-comment">// ‰∏ä‰Ωç„ÅÆ„Éà„Éº„ÇØ„É≥ÁßªÈÄÅË®±ÂèØ„ÅÆ‰ªò‰∏é„ÅÆÊåôÂãï„ÇíÂè∏„ÇãÈñ¢Êï∞Ôºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>Approve `operator` to operate on all of `owner` tokens
     *
     * Emits an {ApprovalForAll} event.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_setApprovalForAll</span>(<span class="hljs-params">
        address owner,
        address operator,
        bool approved
    </span>) <span class="hljs-title">internal</span> <span class="hljs-title">virtual</span> </span>{
        <span class="hljs-comment">// ÁßªÈÄÅË®±ÂèØ„ÅÆ‰ªò‰∏éÂÖà„Åå„Éà„Éº„ÇØ„É≥‰øùÊúâËÄÖÂá∫„Å™„ÅÑ„Åì„Å®„ÇíÁ¢∫Ë™ç</span>
        <span class="hljs-built_in">require</span>(owner != operator, <span class="hljs-string">&quot;ERC721: approve to caller&quot;</span>);

        <span class="hljs-comment">// Èñ¢‰øÇ„Åô„Çã„Éû„ÉÉ„Éî„É≥„Ç∞„ÇíÈÅ©Âàá„Å´Â§âÊõ¥„Åó„Å¶„ÅÑ„Çã</span>
        _operatorApprovals[owner][operator] = approved;
        <span class="hljs-comment">// „Éï„É≠„É≥„Éà„Ç®„É≥„ÉâÁ≠â„Å´Âêë„Åë„Åüevent„Çíemit„Åó„Å¶„ÅÑ„Çã</span>
        emit ApprovalForAll(owner, operator, approved);
    }

    <span class="hljs-comment">// ÂºïÊï∞„ÅÆtokenId„ÇíÊåÅ„Å§„Éà„Éº„ÇØ„É≥„Åå„Éü„É≥„Éà„Åï„Çå„Å¶„ÅÑ„Çã„Åã„Å©„ÅÜ„Åã„ÇíÁ¢∫Ë™ç„Åô„ÇãÈñ¢Êï∞</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>Reverts if the `tokenId` has not been minted yet.
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_requireMinted</span>(<span class="hljs-params">uint256 tokenId</span>) <span class="hljs-title">internal</span> <span class="hljs-title">view</span> <span class="hljs-title">virtual</span> </span>{
        <span class="hljs-comment">// ÊåôÂãï„ÇíÂè∏„ÇãÂ≠êÈñ¢Êï∞„ÇíÂëº„Å≥Âá∫„Åó„Å¶„ÅÑ„Çã</span>
        <span class="hljs-built_in">require</span>(_exists(tokenId), <span class="hljs-string">&quot;ERC721: invalid token ID&quot;</span>);
    }

    <span class="hljs-comment">// ERC721Rceiver„ÅåÈÅ©Áî®„Åï„Çå„ÅüÈñ¢Êï∞‰∏ä„ÅßÈÅ©Âàá„Å™Êìç‰Ωú„ÇíÊñΩ„Åô„Åü„ÇÅ„ÅÆÈñ¢Êï∞</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>Internal function to invoke {IERC721Receiver-onERC721Received} on a target address.
     * The call is not executed if the target address is not a contract.
     *
     * <span class="hljs-doctag">@param </span>from address representing the previous owner of the given token ID
     * <span class="hljs-doctag">@param </span>to target address that will receive the tokens
     * <span class="hljs-doctag">@param </span>tokenId uint256 ID of the token to be transferred
     * <span class="hljs-doctag">@param </span>data bytes optional data to send along with the call
     * <span class="hljs-doctag">@return </span>bool whether the call correctly returned the expected magic value
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_checkOnERC721Received</span>(<span class="hljs-params">
        address <span class="hljs-keyword">from</span>,
        address to,
        uint256 tokenId,
        bytes memory data
    </span>) <span class="hljs-title">private</span> <span class="hljs-title">returns</span> (<span class="hljs-params">bool</span>) </span>{
        <span class="hljs-comment">// ifÊñá„ÅÆÊù°‰ª∂ÁØÄ„ÅßAddress„É©„Ç§„Éñ„É©„É™„Åã„ÇâÂºïÁî®„Åó„ÅüÈñ¢Êï∞„ÅÆÁúüÂÅΩÊºîÁÆó„ÇíË°å„ÅÑÔºå</span>
        <span class="hljs-comment">// ÂºïÊï∞„ÅÆto„Ç¢„Éâ„É¨„Çπ„Åå„Ç≥„É≥„Éà„É©„ÇØ„Éà„Åã„Å©„ÅÜ„ÅãÁ¢∫Ë™ç</span>
        <span class="hljs-comment">// „Ç≥„É≥„Éà„É©„ÇØ„Éà„Åß„Å™„ÅÑ„Å™„ÇâelseÊñá„Åßtrue„ÇíËøî„Åô</span>
        <span class="hljs-keyword">if</span> (to.isContract()) {
            <span class="hljs-comment">// ÂΩìË©≤„Ç≥„É≥„Éà„É©„ÇØ„ÉàERC721Rceiver„ÇíÂÆüË£Ö„Åó„Å¶„ÅÑ„Çã„ÅãÁ¢∫„Åã„ÇÅ„Çã</span>
            <span class="hljs-comment">// ÂÆüË£Ö„Åï„Çå„Å¶„ÅÑ„Çå„Å∞Èñ¢Êï∞„ÅÆ„Çª„É¨„ÇØ„Çø„Éº(Èñ¢Êï∞Ë≠òÂà•Â≠ê)„ÅåËøî„Å£„Å¶„Åè„Çã„ÅÆ„ÅßÔºåÁúüÂÅΩÊºîÁÆó„ÅßÂà§ÂÆö„Åô„Çã</span>
            <span class="hljs-keyword">try</span> IERC721Receiver(to).onERC721Received(_msgSender(), <span class="hljs-keyword">from</span>, tokenId, data) returns (bytes4 retval) {
                <span class="hljs-comment">// onERC721Receiver„ÅÆÊ≠£„Åó„ÅÑÈñ¢Êï∞Ë≠òÂà•Â≠ê„ÇíÂëº„Å≥Âá∫„ÅóÔºåto‰∏ä„Åß„ÅÆÂΩìË©≤Èñ¢Êï∞Ë≠òÂà•Â≠êÂëº„Å≥Âá∫„Åó„Å®ÊØîËºÉ</span>
                <span class="hljs-keyword">return</span> retval == IERC721Receiver.onERC721Received.selector;
            } <span class="hljs-keyword">catch</span> (bytes memory reason) {
                <span class="hljs-comment">// reason„ÅÆlength„Éó„É≠„Éë„ÉÜ„Ç£„ÇíÂèÇÁÖß</span>
                <span class="hljs-comment">// Á©∫„Å™„Çâ„Å∞„Ç´„Çπ„Çø„É†„Ç®„É©„Éº„ÅØÂ≠òÂú®„Åó„Å™„ÅÑ</span>
                <span class="hljs-keyword">if</span> (reason.length == <span class="hljs-number">0</span>) {
                    revert(<span class="hljs-string">&quot;ERC721: transfer to non ERC721Receiver implementer&quot;</span>);
                <span class="hljs-comment">// Á©∫„Åß„Å™„ÅÑÂ†¥ÂêàÔºå„Ç´„Çπ„Çø„É†„Ç®„É©„Éº„ÅåÂ≠òÂú®„Åô„Çã„ÅÆ„ÅßÔºå</span>
                <span class="hljs-comment">// „Ç®„É©„ÉºÂÜÖÂÆπ„Çí„Ç¢„Çª„É≥„Éñ„É™revert„Åß„Ç≠„É£„ÉÉ„ÉÅ„Åô„Çã</span>
                <span class="hljs-comment">// https://ethereum.stackexchange.com/questions/133748/trying-to-understand-solidity-assemblys-revert-function</span>
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">/// @solidity memory-safe-assembly</span>
                    assembly {
                        revert(add(<span class="hljs-number">32</span>, reason), mload(reason))
                    }
                }
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
    }

    <span class="hljs-comment">// „Éà„Éº„ÇØ„É≥„ÅÆÁßªÂãïÂâç„Å´ÂÆüË°å„Åï„Çå„Çã„É°„ÇΩ„ÉÉ„Éâ„ÇíÂëº„Å≥Âá∫„ÅôÔºé</span>
    <span class="hljs-comment">// „Éá„Éï„Ç©„É´„Éà„Åß„ÅØÁ©∫Ôºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>Hook that is called before any token transfer. This includes minting
     * and burning.
     *
     * Calling conditions:
     *
     * - When `from` and `to` are both non-zero, ``from``&apos;s `tokenId` will be
     * transferred to `to`.
     * - When `from` is zero, `tokenId` will be minted for `to`.
     * - When `to` is zero, ``from``&apos;s `tokenId` will be burned.
     * - `from` and `to` are never both zero.
     *
     * To learn more about hooks, head to xref:ROOT:extending-contracts.adoc#using-hooks[Using Hooks].
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_beforeTokenTransfer</span>(<span class="hljs-params">
        address <span class="hljs-keyword">from</span>,
        address to,
        uint256 tokenId
    </span>) <span class="hljs-title">internal</span> <span class="hljs-title">virtual</span> </span>{}

    <span class="hljs-comment">// „Éà„Éº„ÇØ„É≥„ÅÆÁßªÂãïÂæå„Å´ÂÆüË°å„Åï„Çå„Çã„É°„ÇΩ„ÉÉ„Éâ„ÇíÂëº„Å≥Âá∫„ÅôÔºé</span>
    <span class="hljs-comment">// „Éá„Éï„Ç©„É´„Éà„Åß„ÅØÁ©∫Ôºé</span>
    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@dev </span>Hook that is called after any transfer of tokens. This includes
     * minting and burning.
     *
     * Calling conditions:
     *
     * - when `from` and `to` are both non-zero.
     * - `from` and `to` are never both zero.
     *
     * To learn more about hooks, head to xref:ROOT:extending-contracts.adoc#using-hooks[Using Hooks].
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_afterTokenTransfer</span>(<span class="hljs-params">
        address <span class="hljs-keyword">from</span>,
        address to,
        uint256 tokenId
    </span>) <span class="hljs-title">internal</span> <span class="hljs-title">virtual</span> </span>{}
}
</code></pre>
<p>‚Üì ÂÖÉ„Éï„Ç°„Ç§„É´</p>
<p><a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC721/ERC721.sol" target="_blank">openzeppelin-contracts/contracts/token/ERC721/ERC721.sol</a></p>
<h2 id="4-tips">4. TIPs</h2>
<h3 id="ÂØÑÁ®ø„Çí„ÅäÂæÖ„Å°„Åó„Å¶„Åä„Çä„Åæ„ÅôÔºÅÔºÅ">ÂØÑÁ®ø„Çí„ÅäÂæÖ„Å°„Åó„Å¶„Åä„Çä„Åæ„ÅôÔºÅÔºÅ</h3>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../ERC20/" class="navigation navigation-prev " aria-label="Previous page: ERC20">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../ERC777/" class="navigation navigation-next " aria-label="Next page: ERC777">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"ERC721","level":"2.2","depth":1,"next":{"title":"ERC777","level":"2.3","depth":1,"path":"ERC777/README.md","ref":"./ERC777/README.md","articles":[]},"previous":{"title":"ERC20","level":"2.1","depth":1,"path":"ERC20/README.md","ref":"./ERC20/README.md","articles":[]},"dir":"ltr"},"config":{"plugins":["highlight","mermaid-md-adoc"],"root":"docs","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"mermaid-md-adoc":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"https://github.com/neila","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Deepdive into ERCs","language":"ja","gitbook":"*","description":"Ëâ≤„Çì„Å™ERC„ÇíË™≠„Çì„Åß„Åø„Çã"},"file":{"path":"ERC721/README.md","mtime":"2025-04-13T12:44:34.664Z","type":"markdown"},"gitbook":{"version":"4.0.7","time":"2025-04-13T12:44:37.813Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/honkit-plugin-mermaid-md-adoc/plugin.js"></script>
        
    
        
        <script src="../gitbook/honkit-plugin-mermaid-md-adoc/mermaid.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

